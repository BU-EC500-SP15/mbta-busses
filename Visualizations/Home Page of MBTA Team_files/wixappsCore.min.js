define("wixappsCore/core/proxyFactory",["lodash","react"],function(a,b){"use strict";function e(a,b){b.displayName=a+"Proxy",c[a]=b}function f(e){a.has(c,e)||(e="View");var f=d[e];if(f)return f;var g=c[e];if(!g)throw"no such proxy definition for name: "+e;return f=b.createClass(g),d[e]=f,f}function g(a){delete d[a]}function h(b,d){return c.hasOwnProperty(b)?void a.merge(c[b],d):void console.error("Trying to extend proxy ["+b+"] but the proxy is not defined")}function i(b){return a.has(c,b)}var c={},d={},j=function(a){return{displayName:a,render:function(){return b.DOM.div(null,a)}}},k=["Label","ClippedParagraph","ClippedParagraph2","Date","DateEdit","TimeEdit","InlineText","InlineTextInput","TextInput","ErasableTextInput","NumberInput","NumericStepper","CheckBox","CheckBoxViewProxy","RichTextEditor","RichTextEditorInline","Price","EnumSelector","Image","Video","VideoSelector","VideoThumb","ImageSelector","ImageInput","VerticalList","FlowList","MultiColumn","VerticalListEditor","DraggableListItem","Box","VBox","HBox","Field","FieldBox","TextField","DataEditField","Stack","Css","InlineSpacer","HorizontalLine","VerticalLine","Switch","SwitchBox","OptionalArea","SuperFlow","Button","Button2","Table","Deck","TabMenu","Icon","StringArrayInput","Toggle","MusicPlayer","AudioInput","InlineSvg","Link","LinkSelector","OptionsList","SelectOptionsList","OptionsListInput","ComboBox","RadioGroup","CheckBoxGroup","TextArea","Area","Container","ZoomLink","AppLink","ZoomLayout","FixedRatioLayout","GoogleMap","LocationSelector","TagInput","DragAndDropVList","List2","PaginatedList","UnstyledLabel","TooltipIcon","Help","IFrame","ImageButton","TPAGallery","MediaRichTextEditorInline","MediaLabel","MediaThumb","Gallery","GridGallery","SliderGallery","ColumnGallery","PaginatedColumnGallery"];return a.map(k,function(a){e(a,j(a))}),{getProxyClass:f,register:e,invalidate:g,extend:h,isValidProxyName:i}}),define("wixappsCore/core/ViewContextMap",["lodash"],function(a){"use strict";function d(b){return a.isString(b)?a.compact(b.split(/[\.\[\]]/)):b}function e(c){return a.initial(c.split(b)).join(b)}function f(a,c,d){return a?c&&this.contextMap[c]?c:a+b+String(d.index++):"0"}function g(b,c,d){for(var f=b;f;){if(a.has(this.contextMap[f][c],d))return this.contextMap[f][c];f=e(f)}return void 0}function h(){this.contextMap={}}function i(a,b,c){for(;a.length>1;)b=b[a.shift()];b[a.shift()]=c}var b="_",c=".";return h.prototype={resolvePath:function(b,c){var f=a.flatten(a.map(d(c),d)),g=b,h=[];if(a.each(f,function(a){if("parent"===a){if(g=e(g),!g)throw"Error:: no parent context."}else"this"!==a&&h.push(a)}),this.contextMap[g].scopePath.length&&a.all(this.contextMap[g].scopePath,a.isArray)&&h.length&&a.isNumber(h[0])){var i=h.shift();return this.contextMap[g].scopePath[i].concat(h)}return this.contextMap[g].scopePath.concat(h)},newContextForDataItem:function(b,c,d,e,g,h){var i=f.call(this,b,h,this.contextMap[b]);return this.contextMap[i]&&a.isEqual(this.contextMap[i].scopePath,c)||(this.contextMap[i]={vars:d||{},events:e||{},functionLibrary:g||{},scopePath:c,index:0}),i},newContextForDataPath:function(b,d,e,f,g,h){var i=this.contextMap[b],j=a.isArray(d)?d:d.split(c);j=a.flatten(a.map(j,function(b){return a.isString(b)?b.split(c):b})),j=a.without(j,"this");var k=i.scopePath.concat(j);return this.newContextForDataItem(b,k,e,f,g,h)},getVar:function(a,b){b=b.replace(/^\$/,"");var c=g.call(this,a,"vars",b);return c&&c[b]},setVar:function(b,c,d){var e=c.replace(/^\$/,"").split("."),f=a.first(e),h=g.call(this,b,"vars",f);h&&i(e,h,d)},overrideContextVars:function(b,c){if(!this.hasContext(b))throw"Context does not exist";a.extend(this.contextMap[b].vars,c)},getEvent:function(a,b){var c=g.call(this,a,"events",b);return c&&c[b]},getExpressionsFunctions:function(b){for(var c=b,d={};c;)a.defaults(d,this.contextMap[c].functionLibrary),c=e(c);return d},resetContext:function(){this.contextMap={}},hasContext:function(b){return a.has(this.contextMap,b)}},h}),define("wixappsCore/core/expressions/functionLibrary",["lodash"],function(a){"use strict";function d(){var b={},d=function(b,c,e){a(c).keys().forEach(function(a){var f=c[a];"function"==typeof f?b[e+a]=f:"object"==typeof f&&d(b,f,a+".")})};return d(b,c,""),b}function e(a){this.siteData=a}var b={font_0:"Title",font_1:"Menu",font_2:"Page title",font_3:"Heading XL",font_4:"Heading L",font_5:"Heading M",font_6:"Heading S",font_7:"Body L",font_8:"Body M",font_9:"Body S",font_10:"Body XS"},c={and:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]===!1)return!1;return!0},or:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]===!0)return!0;return!1},"if":function(a,b,c){return a?b:c},eq:function(a,b){return a===b},ne:function(a,b){return a!==b},not:function(a){return!a},"!":function(a){return!a},gt:function(a,b){return a>b},gte:function(a,b){return a>=b},lt:function(a,b){return b>a},lte:function(a,b){return b>=a},toString:function(a){return a.toString?a.toString():""+a},toJson:function(a){return JSON.stringify(a)},mod:function(a,b){return a%b},add:function(){for(var a=0,b=0;b<arguments.length;b++)a+=arguments[b];return a},mult:function(){for(var a=1,b=0;b<arguments.length;b++)a*=arguments[b];return a},sub:function(a,b){return a-b},div:function(a,b){return a/b},match:function(a,b,c){return a===b?c:void 0},"true?":function(a,b){return Boolean(a)===!0?b:void 0},"false?":function(a,b){return Boolean(a)===!1?b:void 0},"else":function(a,b){return void 0===a?b:a},map:function(){for(var a=1;a<arguments.length-1;a+=2)if(arguments[0]===arguments[a])return arguments[a+1];return arguments.length%2===0?arguments[arguments.length-1]:arguments[0]},Math:{floor:function(a){return Math.floor(a)},round:function(a){return Math.round(a)}},Array:{length:function(a){return a.length},isEmpty:function(a){return null===a||0===a.length},slice:function(a,b,c){return a.slice(b,c)},join:function(a,b){return a.join(b)},filter:function(a,b,c){return a.filter(function(a){return c.contains(a[b])})},itemAt:function(a,b){return a[b]}},RichText:{isEmpty:function(a){return"<div></div>"===a.text}},String:{length:function(a){return String(a).length},isEmpty:function(a){return null===String(a)||0===String(a).length},charAt:function(a,b){return String(a).charAt(b)},charCodeAt:function(a,b){return String(a).charCodeAt(a,b)},concat:function(){return a.reduce(arguments,function(a,b){return a.concat(String(b))},"")},indexOf:function(a,b){return String(a).indexOf(b)},lastIndexOf:function(a,b){return String(a).lastIndexOf(b)},match:function(a,b){return String(a).match(new RegExp(b))},replace:function(a,b,c){return String(a).replace(b,c)},search:function(a,b){return String(a).search(new RegExp(b))},slice:function(a,b,c){return String(a).slice(b,c)},split:function(a,b){return String(a).split(b)},substr:function(a,b,c){return String(a).substr(b,c)},substring:function(a,b,c){return String(a).substring(b,c)},toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},contains:function(a,b){return String(a).contains(b)},trim:function(a){return String(a).trim()},toInt:function(a){return parseInt(a,10)},toFloat:function(a){return parseFloat(a)}},Date:{createDate:function(a){return a?new Date(a):new Date},getBefore:function(a,b,c,d){var e=d?new Date(d):new Date;return e.setDate(e.getDate()-a),e.setMonth(e.getMonth()-b),e.setFullYear(e.getFullYear()-c),e},getAfter:function(a,b,c,d){var e=d?new Date(d):new Date;return e.setDate(e.getDate()-a),e.setMonth(e.getMonth()-b),e.setFullYear(e.getFullYear()-c),e}},Theme:{getColor:function(b){var c=this.siteData.getColor(b);return"#"!==c[0]?!a.contains(c,"rgb")&&a.contains(c,",")?"rgba("+c+")":"#"+c:c}},Styles:{fontToTextStyle:function(a){return b["font_"+a]}},Mobile:{zoom:function(){return this.siteData.isMobileView()?1/this.siteData.mobile.getZoom():1}}};return e.prototype=d(),e}),define("wixappsCore/core/viewsRenderer",["react","lodash","wixappsCore/core/proxyFactory","wixappsCore/core/ViewContextMap","wixappsCore/core/expressions/functionLibrary"],function(a,b,c,d,e){"use strict";return{componentWillMount:function(){this.viewContextMap=new d(this),this.functionLibrary=new e(this.props.siteData)},getDataAspect:function(){return this.props.siteAPI.getSiteAspect("wixappsDataAspect")},getAppService:function(){return this.props.siteData.getClientSpecMapEntry(this.props.compData.appInnerID)},getPackageName:function(a){var b=this.getAppService(a||this.props.siteData);return b&&(b.packageName||b.type)},getAppDescriptor:function(){var a=this.getDataAspect(),b=this.getPackageName();return a.getDescriptor(b)},getFormatName:function(){return this.props.siteData.isMobileView()?"Mobile":""},getNormalizedDataPath:function(a,b){return null===a?b:this.viewContextMap.resolvePath(a,b)},getDataByPath:function(a,b){if(null===a)return this.getDataByFullPath(b);var c=this.getPackageName(),d=this.getDataAspect(),e=this.getNormalizedDataPath(a,b);return d.getDataByPath(c,e)},getDataByFullPath:function(a){function e(a){return b.flatten(b.map(a,function(a){return b.isString(a)?a.split("."):a}))}var c=this.getPackageName(),d=this.getDataAspect(),f=[];return b.all(a,b.isArray)?f=b.map(a,function(a){var c=e(a);return b.without(c,"this")}):(f=e(a),f=b.without(f,"this")),d.getDataByPath(c,f)},setDataByPath:function(a,b,c){var d=this.getPackageName(),e=this.getDataAspect(),f=this.getNormalizedDataPath(a,b);return e.setDataByPath(d,f,c)},setVar:function(a,b,c,d){this.viewContextMap.setVar(a,b,c),d||(this.registerReLayout(),this.forceUpdate())},getCompExtraData:function(){var a=this.getDataAspect();return a.getExtraDataByCompId(this.getPackageName(),this.props.compData.id)},componentWillUpdate:function(){"content"!==this.state.$displayMode||b.isEqual(this.rootDataItemRef,this.getRootDataItemRef())||this.viewContextMap.resetContext()},renderView:function(d){var e=this.getPackageName(),f={viewProps:{getPartData:this.getPartData,getPartDefinition:this.getPartDefinition,resolveResourcePath:this.resolveResourcePath,getNormalizedDataPath:this.getNormalizedDataPath,getDataByPath:this.getDataByPath,setDataByPath:this.setDataByPath,getDataByFullPath:this.getDataByFullPath,getViewDef:this.getViewDef,getLocalizationBundle:this.getLocalizationBundle,classSet:this.classSet,setVar:this.setVar,siteAPI:this.props.siteAPI,siteData:this.props.siteData,pageData:this.props.pageData,compProp:this.props.compProp,loadedStyles:this.props.loadedStyles,compId:this.props.id,packageName:e},functionLibrary:this.functionLibrary,viewContextMap:this.viewContextMap,viewName:this.getViewName(),formatName:this.props.formatName||this.getFormatName(),parentId:this.props.id,ref:"rootProxy",parentContextPath:null},g={viewName:f.viewName,partDirection:this.props.compProp.direction||"ltr"};return this.props.style&&this.props.style.width&&(g.compWidth=this.props.style.width),this.logic&&(f.logic=this.logic,this.logic.getViewVars&&(g=b.defaults(this.logic.getViewVars(this.getCompExtraData()),g))),this.rootDataItemRef=this.getRootDataItemRef(),f.contextProps={path:this.rootDataItemRef,vars:{view:g,proxy:{}},events:{},functionLibrary:{}},f.proxyLayout={direction:g.partDirection},d&&(f.proxyLayout.height=this.props.style.height),a.createElement(c.getProxyClass("View"),f)}}}),define("wixappsCore/core/viewsCustomizer",["lodash"],function(a){"use strict";function b(a,b){var d=[];return"vars"===b.fieldId?d.push(a.vars):c(a,b,0,d),d}function c(b,d,e,f){var g=b.id||b.data||e;("*"===d.fieldId||d.fieldId===g)&&f.push(b),b.comp&&b.comp.items&&a.each(b.comp.items,function(a,b){c(a,d,b,f)}),b.comp&&b.comp.templates&&a.each(b.comp.templates,function(a){c(a,d,0,f)}),b.comp&&b.comp.cases&&a.each(b.comp.cases,function(b){a.isArray(b)?a.each(b,function(a){c(a,d,0,f)}):c(b,d,0,f)}),b.comp&&b.comp.columns&&"Table"===b.comp.name&&a.each(b.comp.columns,function(b){a.each(["item","header","footer"],function(a){void 0!==b[a]&&c(b[a],d,0,f)})})}function d(a,b){return!("*"!==b.forType&&a.forType!==b.forType||"*"!==b.view&&a.name!==b.view||"*"!==b.format&&(a.format||"")!==(b.format||""))}function e(b){var c=a.rest(arguments),e=this;return a.each(c,function(c){a.each(c,function(a){d(b,a)&&e.applyCustomization(b,a)})}),b}function f(c,d){var e=c.format||"",f=d.format||"";if("*"===f||f===e){var g=b(c,d);a.each(g,function(b){if(a.isPlainObject(b))for(var c=b,e=d.key.split("."),f=0;f<e.length;f++){var g=e[f];if(f===e.length-1){var h=d.value;/^\s*(\+|-)?\d+\s*$/.test(d.value)&&(h=parseInt(h,10)),void 0===h?delete c[g]:c[g]=h}else c[g]||(c[g]={}),c=c[g]}})}}return{customizeView:e,applyCustomization:f}}),define("wixappsCore/core/logicFactory",[],function(){"use strict";var a={};return{register:function(b,c){a[b]=c},getLogicClass:function(b){return a[b]}}}),define("wixappsCore/core/styleMap",[],function(){"use strict";return{Area:{"default":{skin:"wysiwyg.viewer.skins.area.AppleArea",style:"c1"},ecomCouponBox:{skin:"wysiwyg.viewer.skins.apps.DefaultBoxSkin",style:"ecom_cbx1"},ecomCartHeader:{skin:"wysiwyg.viewer.skins.apps.DefaultBoxSkin",style:"ecom_ch1"},ecomEmptyCartBG:{skin:"wysiwyg.viewer.skins.apps.DefaultBoxSkin",style:"ecom_ecbg1"}},Button:{"default":{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"b3"},ecomViewCart:{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"ecom_vc1"},ecomCheckout:{skin:"wysiwyg.viewer.skins.button.DisabledLayerButton",style:"ecom_co1"},ecomAddToCart:{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"ecom_atc1"},ecomRemoveFromCart:{skin:"wysiwyg.viewer.skins.button.FixedFontButton",style:"ecom_rfc1"},ecomApplyCoupon:{skin:"wysiwyg.viewer.skins.button.ApplyButtonEcom",style:"ecom_apl1"},ecomAddProduct:{skin:"wysiwyg.viewer.skins.button.AddProductButton",style:"ecom_ap1"}},Button2:{"default":{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"b3"},ecomViewCart:{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"ecom_vc1"},ecomCheckout:{skin:"wysiwyg.viewer.skins.button.DisabledLayerButton",style:"ecom_co1"},ecomAddToCart:{skin:"wysiwyg.viewer.skins.button.BasicButton",style:"ecom_atc1"},ecomRemoveFromCart:{skin:"wysiwyg.viewer.skins.button.FixedFontButton",style:"ecom_rfc1"},ecomApplyCoupon:{skin:"wysiwyg.viewer.skins.button.ApplyButtonEcom",style:"ecom_apl1"},ecomAddProduct:{skin:"wysiwyg.viewer.skins.button.AddProductButton",style:"ecom_ap1"},ecomFeedbackContinueShopping:{skin:"wysiwyg.viewer.skins.button.EcomFeedbackContinueShopping",style:"ecom_fmcs1"},ecomFeedbackContinueShopping2:{skin:"wysiwyg.viewer.skins.button.EcomFeedbackContinueShopping2",style:"ecom_fmcs2"},ecomFeedbackCheckout:{skin:"wysiwyg.viewer.skins.button.EcomFeedbackCheckoutButton",style:"ecom_fmc1"}},ComboBox:{"default":{skin:"wysiwyg.viewer.skins.input.ComboBoxInputSkinNoValidation",style:"wa_cb1"},ecomComboBox:{skin:"wixapps.integration.skins.ecommerce.inputs.ComboBoxInputSkin",style:""},ecomShippingComboBox:{skin:"wysiwyg.viewer.skins.appinputs.EcomComboBoxInputSkin",style:"ecom_scb1"},wixAppsGui:{skin:"wixapps.integration.skins.inputs.ComboBoxInputSkin",style:""}},TextArea:{"default":{skin:"wysiwyg.viewer.skins.input.TextAreaInputSkin",style:"wa_tai1"},ecomTextArea:{skin:"wixapps.integration.skins.ecommerce.inputs.TextAreaInputSkin",style:""}},TextInput:{"default":{skin:"wysiwyg.viewer.skins.appinputs.AppsTextInputSkin",style:"wa_ti1"},ecomTextInput:{skin:"wysiwyg.viewer.skins.appinputs.EcomTextInputSkin",style:"ecom_ti1"}},ErasableTextInput:{"default":{skin:"wysiwyg.viewer.skins.appinputs.EcomErasableTextInputSkin",style:"ecom_eti1"}},Gallery:{"default":{skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridDefaultSkin",style:"pagg1"},productGallery:{skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridSimple",style:"pgg_cg0"},contentGallery:{skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridNoDetail",style:"pgg_cg1"},minipostGallery:{skin:"wysiwyg.viewer.skins.paginatedgrid.wixapps.PaginatedGridNoDetail",style:"pgg_cg2"},hoverGallery:{skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridNoBG",style:"pgg_cg3"},blogGallery:{skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridNoDetail",style:"pgg_cg4"}},Video:{"default":{skin:"wysiwyg.viewer.skins.video.VideoDefault",style:"vl"},mediaLabel:{skin:"wysiwyg.viewer.skins.VideoSkin"}},Container:{"default":{skin:"wysiwyg.viewer.skins.area.AppleArea",style:"c1"}},Image:{"default":{skin:"wysiwyg.viewer.skins.photo.NoSkinPhoto",style:"wp1"}},VideoThumb:{"default":{skin:"wysiwyg.viewer.skins.photo.NoSkinPhoto",style:"wp1"}},HorizontalLine:{"default":{skin:"wysiwyg.viewer.skins.FiveGridLineSkin",style:"hl1"}},VerticalLine:{"default":{skin:"wysiwyg.viewer.skins.VerticalLineSkin",style:"vl1"}},Table:{"default":{skin:"wysiwyg.viewer.skins.table.TableComponentDefaultSkin",style:"tblc1"}},VerticalList:{"default":{skin:"skins.core.InlineSkin"}},List2:{"default":{skin:"skins.core.InlineSkin"}},PaginatedList:{"default":{skin:"skins.core.InlineSkin"}},FlowList:{"default":{skin:"skins.core.InlineSkin"}},Date:{"default":{skin:"wysiwyg.viewer.skins.WRichTextClickableSkin"}},MediaLabel:{"default":{skin:"wysiwyg.viewer.skins.WRichTextClickableSkin"}},Label:{"default":{skin:"wysiwyg.viewer.skins.WRichTextClickableSkin"}},InlineText:{"default":{skin:"skins.core.VerySimpleSkin"}},ClippedParagraph:{"default":{skin:"wysiwyg.viewer.skins.WRichTextClickableSkin"}},ClippedParagraph2:{"default":{skin:"wysiwyg.viewer.skins.WRichTextClickableSkin"}},Icon:{"default":{skin:"wixapps.integration.skins.IconSkin"}},ImageButton:{"default":{skin:"wixapps.integration.skins.ImageButtonSkin"}},Toggle:{"default":{skin:"wixapps.integration.skins.ToggleSkin"}},SliderGallery:{"default":{skin:"wysiwyg.viewer.skins.galleryselectableslider.SelectableSliderGalleryDefaultSkin"}},NumericStepper:{"default":{skin:"wysiwyg.common.components.numericstepper.viewer.skins.NumericStepperSimpleSkin",style:"nums1"}}}}),define("wixappsCore/core/styleData",["wixappsCore/core/styleMap"],function(a){"use strict";function b(b){return a[b]&&a[b]["default"]&&a[b]["default"].skin}function c(b,c,d,e,f){if(f&&e)return{skin:f,styleId:e};if(f)return{skin:f};var g=a[c][d]||a[c]["default"];return e=e||g.style,e?{styleId:e,skin:b[e]?b[e].skin:g.skin}:{skin:g.skin}}return{getDefaultSkinName:b,getSkinAndStyle:c}}),define("wixappsCore/core/styleCollector",["lodash","core","skins","wixappsCore/core/styleData","wixappsCore/core/styleMap"],function(a,b,c,d,e){"use strict";function g(b,c,d,e){var i,g=b&&d[b]&&f[d[b].skin],h=c&&f[c];i=g?b:h?c:"",i&&!e[i]&&(e[i]="s"+a.size(e))}function h(b,c,e){var f=b&&b.comp&&b.comp.style,i=b&&b.comp&&(b.comp.skin||d.getDefaultSkinName(b.comp.name));g(f,i,c,e);var j=["items","cases","templates"];a.each(j,function(d){b.comp&&b.comp[d]&&a.each(b.comp[d],function(b){a.isArray(b)?a.each(b,function(a){h(a,c,e)}):h(b,c,e)})})}function i(b,c){a.each(e,function(d){a.each(d,function(a){g(a.style,a.skin,b,c)})})}var f=c.skins;return{collectViewStyles:h,addStyleIfNeeded:g,addDefaultStyles:i}}),define("wixappsCore/core/wixappsDataHandler",["lodash"],function(a){"use strict";function b(a,b){return a?(a.wixapps=a.wixapps||{},a.wixapps[b]=a.wixapps[b]||{},a.wixapps[b]):null}function c(a,c){var d=b(a,c);return d.descriptor?d.descriptor:null}function d(a,c,d){var e=b(a,c);return e[d]?e[d]:null}function e(a,c,d,e){var f=b(a,c);f[d]=e}function f(a,c,d){var e=b(a,c);delete e[d]}function g(a,c,d){var e=b(a,c);return e[d+"_extraData"]||null}function h(c,d,e){if(!a.isArray(e)||0===e.length)return[];if(a.all(e,a.isArray))return a.map(e,function(a){return h(c,d,a)});var f=a.clone(e),g=b(c,d);if(!g.items)return null;for(var i=g.items;f.length;){var j=f.shift();i=i[j]}return i}function i(c,d,e,f){for(var g=a.clone(e),h=b(c,d),i=h.items;g.length>1;){var j=g.shift();i=i[j]}i[g.shift()]=f}function j(a){return["wixapps",a]}function k(b,c,d,e){var f=l(c,d,e);a.merge(f,b)}function l(a,c,d){var e=b(a,c);return e.metadata=e.metadata||{},e.metadata[d]=e.metadata[d]||{},e.metadata[d]}function m(a,c,d){var e=b(a,c);e.metadata=e.metadata||{},e.metadata[d]=e.metadata[d]||{},e.metadata[d]={}}function n(a,c){var d=b(a,c);return d.metadata=d.metadata||{},d.metadata[c+"_metadata"]=d.metadata[c+"_metadata"]||{},d.metadata[c+"_metadata"]}function o(b,c,d){var e=n(c,d);a.merge(e,b)}return{getDescriptor:c,getDataByCompId:d,setDataForCompId:e,clearDataForCompId:f,getExtraDataByCompId:g,getDataByPath:h,setDataByPath:i,getSiteDataDestination:j,setCompMetadata:k,getCompMetadata:l,getPackageMetadata:n,setPackageMetadata:o,clearCompMetadata:m}}),define("wixappsCore/core/wixappsLogger",["lodash","utils"],function(a,b){"use strict";function i(b,d,e){try{var f=a.defaults({},d,g);c.reportBI(b,f,e)}catch(h){}}function j(b,d,e){try{var f=a.defaults({},d,h);c.reportBI(b,f,e)}catch(g){}}var c=b.logger,d={LISTS_EVENT_SOURCE:60,Type:{ERROR:10,USER_ACTION:40},Category:{EDITOR:1,VIEWER:2,CORE:3,SERVER:4},issue:{GENERAL:0,PROXY:1,APP_LOGIC:2,DATA_SERVICE:3,DATA_ITEMS:4,CORE_WIRING:5,DATA_EDITING:6,APP_BUILDER:7,APP_REPO_SERVICE:8},Severity:{RECOVERABLE:10,WARNING:20,ERROR:30,FATAL:40}},e={GENERIC_ERROR:{errorCode:-2e4,desc:"WixApps unspecified error"},APP_PART2_FAILED_TO_LOAD:{errorCode:-20011,desc:"Failed to load app part",issue:d.issue.APP_BUILDER},DATA_SELECTOR_CONTAINS_NULL:{errorCode:-20013,desc:"A data selector returned from the server with a null id key.",issue:d.issue.APP_BUILDER},MISSING_PERMALINK:{errorCode:-22041,desc:"Site data is missing the permalink data item"},REQUEST_FAILED:{errorCode:-1,desc:"Unspecified error occurred, possibly a connection problem"}};c.register("wixapps","error",e);var f={APP_BUILDER_PART_LOADED:{eventId:103,desc:"App builder - part loaded in published",params:{c2:"appPartName",g2:"userId"}},APP_PART2_FAILED_TO_LOAD_DATA_SELECTOR:{eventId:135,desc:"Failed to load data selector",params:{c1:"dataSelector"}},APP_PART2_FAILED_TO_LOAD_PART_DEFINITION:{eventId:136,desc:"Failed to load app part definition"},VIEW_DEFINITION_NOT_FOUND:{eventId:137,desc:"Failed to load view definition"},TAG_SELECTED_IN_VIEWER:{eventId:305,desc:"User selected a tag in the viewer."}};c.register("wixapps","event",f);var g={desc:e.GENERIC_ERROR.desc,errorCode:e.GENERIC_ERROR.errorCode,type:d.Type.ERROR,issue:d.issue.GENERAL,severity:d.Severity.ERROR,category:d.Category.VIEWER,src:d.LISTS_EVENT_SOURCE},h={type:d.Type.USER_ACTION,adapter:"lists",category:d.Category.VIEWER,src:d.LISTS_EVENT_SOURCE};return{events:f,errors:e,reportError:i,reportEvent:j}}),define("wixappsCore/util/viewsUtils",["lodash"],function(a){"use strict";function b(c,d){c.id=c.id||c.data||"def_"+d;var e=d+1;return c.comp&&c.comp.items&&a.each(c.comp.items,function(a){e=b(a,e)}),c.comp&&c.comp.templates&&a.each(c.comp.templates,function(a){e=b(a,e)}),c.comp&&c.comp.cases&&a.each(c.comp.cases,function(c){a.isArray(c)?a.each(c,function(a){e=b(a,e)}):e=b(c,e)}),c.comp&&c.comp.columns&&"Table"===c.comp.name&&a.each(c.comp.columns,function(c){a.each(["item","header","footer"],function(a){void 0!==c[a]&&(e=b(c[a],e))})}),e}return{fillViewDefMissingIDs:function(a){b(a,0)},sanitizeCompId:function(a){return a.replace(/[\$:]/g,"")}}}),define("wixappsCore/core/expressions/expressionLexer",["lodash"],function(a){"use strict";function c(a){if(a.length){var b=d(a)||e(a)||f(a);return b?[b].concat(this.parseExpression(a.slice(b.length))):this.parseExpression(a.slice(1))}return[]}function d(c){var d=["'",'"'],e=function(a,c){if(a.length){if(b=a.charAt(0),"\\"===b&&a.length>1)return b+a.charAt(1)+e(a.slice(2),c);if(b!==c)return b+e(a.slice(1),c)}return""};return b=c.charAt(0),a.contains(d,b)?'"'+e(c.slice(1),b)+'"':void 0}function e(a){var b=/[\w\*\/\-\%\+\$]/,c=/[\w\*\/\-\%\+\.\$\[\]\?_]/,d=function(a){var b=a.charAt(0);return a.length&&b.match(c)?b+d(a.slice(1)):""},e=a.charAt(0);return e.match(b)?e+d(a.slice(1)):void 0}function f(a){return b=a.charAt(0),"("===b||")"===b?b:void 0}var b;return{parseExpression:c}}),define("wixappsCore/core/expressions/expressionParser",["wixappsCore/core/expressions/expressionLexer"],function(a){"use strict";function d(d){var g=a.parseExpression(d),h="("===g[0]?c:b,i=e(g,h);return f(i)}function e(a,b){if(a.length){var c=g(a,b)||i(a,b)||k(a,b);if(c)return[c.node].concat(e(c.next,b))}return[]}function f(a){if(a.length>0&&a.every(function(a){return"function"===a.type})){var b=a.slice(1).reduce(function(a,b){return{type:b.type,content:b.content,params:[a].concat(f(b.params))}},a[0]);return[b]}return a}function g(a,b){var d=b===c?0:1,f=b===c?1:0;if("("===a[d]&&"string"==typeof a[f]){var g=h(a);return{next:a.slice(g.length+3),node:{type:"function",content:a[f],params:e(g,b)}}}}function h(a){var b=function(a,c){if(!(a.length&&c>0))return[];var d=a[0],e=a.slice(1);switch(d){case"(":return[d].concat(b(e,c+1));case")":return[d].concat(b(e,c-1));default:return[d].concat(b(e,c))}};return b(a.slice(2),1).slice(0,-1)}function i(a){var b,c=a[0];return"true"===c?b=!0:"false"===c?b=!1:'"'===c.charAt(0)&&'"'===c.charAt(c.length-1)||"'"===c.charAt(0)&&"'"===c.charAt(c.length-1)?b=j(c.slice(1,c.length-1)):isNaN(parseFloat(c,10))?isNaN(parseInt(c,10))||(b=parseInt(c,10)):b=parseFloat(c,10),void 0!==b?{next:a.slice(1),node:{type:"primitive",content:b}}:void 0}function j(a){return a=a.replace(/\\/g,"")}function k(a){return{next:a.slice(1),node:{type:"ref",content:a[0]}}}var b=0,c=1;return{parseExpressionSource:d}}),define("wixappsCore/core/expressions/expression",["wixappsCore/core/expressions/expressionParser","lodash"],function(a,b){"use strict";function c(a){return"object"==typeof a&&b.has(a,"$expr")}function d(b,c,d){var e=a.parseExpressionSource(c)[0];return g(b,e,c,d)}function e(a,c,d,e){var f=b.map(c.params,function(b){return g(a,b,d,e)}),h=e[c.content];if(!h)throw new Error("Expression: "+d+" | Cannot resolve function "+c.content+"()");return h.apply(e,f)}function f(a,b,c){var d=a(b.content);if(void 0===d)throw new Error("Expression: "+c+" | Cannot resolve symbol "+b.content);return d}function g(a,b,c,d){switch(b.type){case"primitive":return h(b.content);case"ref":return f(a,b,c,d);case"function":return e(a,b,c,d)}}function h(a){return b.isString(a)?/^\s*(\+|-)?\d+\s*$/.test(a)?parseInt(a,10):"true"===a?!0:"false"===a?!1:"null"===a?null:a:a}return{isExpression:c,evaluate:d,convertStringToPrimitive:h}}),define("wixappsCore/core/styleTranslator",["lodash"],function(a){"use strict";function g(a){return{WebkitBoxOrient:a,WebkitFlexDirection:b[a]||a,msFlexDirection:b[a]||a,flexDirection:b[a]||a}}function h(a,b){var c=1===String(a).split(" ").length;return"none"===a||"0"===a||0===a||""===a?"none":c&&"vertical"===b?a+" 1 auto":a}function i(a,b){var c=h(a,b);return{"min-width":0,WebkitFlex:c,msFlex:c,flex:c}}function k(b,c){return a.transform(b,function(b,d,e){var f=j[e];f?a.merge(b,f(d,c)):b[e]=d},{})}var b={horizontal:"row",vertical:"column"},c={start:"flex-start",end:"flex-end"},d=a.invert(c),e={top:"start",middle:"center",bottom:"end",left:"start",right:"end"},f={start:"flex-start",end:"flex-end"},j={"flex-direction":g,"box-orient":g,"box-flex":i,flex:i,"align-items":function(a){return{WebkitAlignItems:c[a]||a,msFlexAlign:d[a]||a,"align-items":c[a]||a,"align-self":c[a]||a}},"box-align":function(a){return a=e[a]||a,{WebkitBoxAlign:c[a]||a,WebkitAlignItems:c[a]||a,MozBoxAlign:c[a]||a,msFlexAlign:a,alignItems:c[a]||a,boxAlign:c[a]||a}},"justify-content":function(a){return{justifyContent:f[a]||a,WebkitJustifyContent:f[a]||a,MozJustifyContent:f[a]||a,msFlexPack:a,msJustifyContent:f[a]||a}},"box-shadow":function(a){return{"-webkit-box-shadow":a,"-moz-box-shadow":a,"box-shadow":a}},"border-radius":function(a){return{"-webkit-border-radius":a,"-moz-border-radius":a,"border-radius":a}}};return{translate:k}}),define("wixappsCore/util/spacersCalculator",["lodash"],function(a){"use strict";function c(c,d,e,f){e=e||"vertical",f=f||"ltr";var g={before:parseInt(d.spacerBefore||d.spacer,10),after:parseInt(d.spacerAfter||d.spacer,10)};return g.before&&(d[c+b[f][e].before]=g.before),g.after&&(d[c+b[f][e].after]=g.after),a.omit(d,["spacer","spacerBefore","spacerAfter"])}var b={rtl:{vertical:{before:"Top",after:"Bottom"},horizontal:{before:"Right",after:"Left"}},ltr:{vertical:{before:"Top",after:"Bottom"},horizontal:{before:"Left",after:"Right"}}};return{translateStaticSpacers:c.bind(null,"margin"),translateStaticSpacersXax:c.bind(null,"padding")}}),define("wixappsCore/core/wixappsConfiguration",[],function(){"use strict";var a=!1;return{shouldApplyAutomationAttributes:function(){return a},applyAutomationAttributes:function(){a=!0}}}),define("wixappsCore/core/wixappsPlugins",["lodash","wixappsCore/core/wixappsConfiguration"],function(a,b){"use strict";return{getAdditionalDomAttributes:function(c){var d={};return b.shouldApplyAutomationAttributes()&&(d=a.merge(d,{"data-vcview":c.props.viewName,"data-vcfield":c.getViewDefProp("id"),"data-vctype":c.props.forType,"data-proxy":c.constructor.displayName})),d}}}),define("wixappsCore/proxies/mixins/baseProxy",["lodash","core","react","wixappsCore/util/viewsUtils","wixappsCore/core/proxyFactory","wixappsCore/core/styleData","wixappsCore/core/expressions/expression","wixappsCore/core/styleTranslator","wixappsCore/util/spacersCalculator","utils","wixappsCore/core/wixappsPlugins"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){var b=a.parentContextPath,c=a.contextProps;c&&(b=this.createContext(a.parentContextPath,c.path,c.vars,c.events,c.functionLibrary)),this.contextPath=b}function m(a){var b=this.getCompProp("cssClass")||"";return this.props.className&&(b+=" "+this.props.className),this.getProxyCustomCssClass&&(b+=" "+this.getProxyCustomCssClass()),b+=" "+y(a),b=b.trim()}function n(a){var b=this.getCompProp("hoverVar");this.props.viewProps.setVar(this.contextPath,b,a)}function o(){var b={},c=this.getCompProp("hoverVar");c&&(b.onMouseEnter=n.bind(this,!0),b.onMouseLeave=n.bind(this,!1));var d=this.getCompProp("events");return a.transform(d,function(a,b,c){switch(j.stringUtils.startsWith(c,"dom:")&&(c="on"+c[4].toUpperCase()+c.substring(5),a[c]=this.handleViewEvent),c){case"click":a.onClick=this.handleViewEvent}},b,this)}function p(b){return a.isPlainObject(b)&&a.has(b,"_iid")}function q(b){return a.isPlainObject(b)&&b._type&&j.stringUtils.startsWith(b._type,"wix:Ref")}function r(a){return[a.collectionId,a.itemId]}function s(){var b=this.props.viewContextMap.getExpressionsFunctions(this.contextPath);return a.assign(this.props.functionLibrary,b)}function t(b,c){a.isUndefined(b)&&(b=this.contextPath);var d,e=c.split("."),f=e.shift();if("$"===a.first(f))if(d=this.props.viewContextMap.getVar(b,f),g.isExpression(d))d=g.evaluate(t.bind(this,b),d.$expr,s.call(this,b));else for(;e.length;)d=d[e.shift()];else d=this.getDataByPath(c);return g.convertStringToPrimitive(d)}function u(a){return j.stringUtils.startsWith(a,"$")}function v(b){b=b||this.props;var c=this.getViewDefProp("value");if(!a.isUndefined(c))return c;var d=b.viewDef&&b.viewDef.data||"this";return g.isExpression(d)?g.evaluate(t.bind(this,this.contextPath),d.$expr,s.call(this,this.contextPath)):u(d)?this.getVar(d):this.getDataByPath(d,!0)}function w(b,c){return d.sanitizeCompId(a.compact([this.props.viewProps.compId,this.props.viewId,this.contextPath,b&&b.id,c]).join("_"))}function x(b,c){var d=a.isArray(b)?a.map:a.mapValues;return d(b,function(b){var d=b;return g.isExpression(b)?d=g.evaluate(t.bind(this,c),b.$expr,s.call(this,c)):(a.isArray(b)||a.isPlainObject(b))&&(d=x.call(this,b,c)),g.convertStringToPrimitive(d)},this)}function y(a){return a&&a.display&&"box"===a.display?(delete a.display,"flex_display"):""}function z(b,c){var d={layout:b,componentType:c};if(this.useSkinInsteadOfStyles)return d.skin=this.getCompProp("skin")||f.getDefaultSkinName(this.getCompProp("name")),d;var e=f.getSkinAndStyle(this.props.viewProps.siteData.getAllTheme(),this.getCompProp("name"),this.getCompProp("styleNS"),this.getCompProp("style"),this.getCompProp("skin"));return a.extend(e,d)}function A(b){return a.pick(b,function(a,b){return 0===b.indexOf("data-")})}function B(b,c){if(c[""]=a.merge({},c[""],o.call(this),k.getAdditionalDomAttributes(this)),
!b)return c;a.assign(c[""],A(this.props));var d=b(c);return a.each(d,function(a){a&&a.style&&(a.style=h.translate(a.style,this.props.orientation))},this),d}return{getDataByPath:function(a,b){var c=this.props.viewProps.getDataByPath(this.contextPath,a);return b&&q(c)?this.props.viewProps.getDataByFullPath(r(c)):c},getVar:function(a){return this.props.viewContextMap.getVar(this.contextPath,a)},setVar:function(a,b,c){this.props.viewProps.setVar(this.contextPath,a,b,c)},getContextEvent:function(a){return this.props.viewContextMap.getEvent(this.contextPath,a)},getChildProxyProps:function(a,b,c){var d=null;b&&(d={path:b,vars:c.vars||{},events:c.events||{},functionLibrary:c.functionLibrary||{}});var e={ref:"child",viewName:this.props.viewName,forType:this.props.forType,formatName:this.props.formatName,orientation:this.props.orientation,viewDef:a,parentId:this.props.parentId,viewId:this.props.viewId,logicEvents:this.props.logicEvents,logic:this.props.logic,functionLibrary:this.props.functionLibrary,parentContextPath:this.contextPath,contextProps:d,viewContextMap:this.props.viewContextMap,viewProps:this.props.viewProps,id:w.call(this,a,"child")};return e},getChildCompProps:function(c,d){var e={id:w.call(this,this.props.viewDef,this.props.key),ref:"component"};if(!c)return e.style=this.getProxyStyle(),e.className=m.call(this,e.style),a.extend(e,o.call(this),k.getAdditionalDomAttributes(this),A(this.props));var f=this.getProxyStyle(),g=z.call(this,f,c),h=b.componentPropsBuilder.getCompProps(g,this.props.viewProps.siteAPI,this.props.pageId,this.props.viewProps.loadedStyles);delete h.style.position;var i=a.merge(h.style,f);return h.className=m.call(this,i),a.extend(h,e,{transformSkinProperties:B.bind(this,d),style:i,compProp:this.props.compProp})},getViewDefProp:function(a,b,c){b=b||this.props.viewDef||{},c=c||this.contextPath;var d=b[a],e=d;if(g.isExpression(d))e=g.evaluate(t.bind(this,c),d.$expr,s.call(this,c));else if("layout"===a||"css"===a||"stylesheet"===a)return x.call(this,d,c);return g.convertStringToPrimitive(e)},getCompProp:function(a,b,c){c=c||this.contextPath;var d=this.getViewDefProp("comp",b,c);return d?this.getViewDefProp(a,d,c):void 0},getStyleDef:function(b,c){if(b)return a.merge({},this.getCompProp("css",b,c),this.getViewDefProp("layout",b,c));var d={};return this.getCustomStyle&&(d=this.getCustomStyle()),a.merge(d,this.getCompProp("css"),this.getViewDefProp("layout"),this.props.proxyLayout)},getProxyStyle:function(){var a=this.getStyleDef(),b=this.props.orientation||"vertical",c=this.props.viewProps.compProp&&this.props.viewProps.compProp.direction;return a.boxSizing="border-box",a=i.translateStaticSpacers(a,b,c),a=h.translate(a,this.props.orientation)},handleViewEvent:function(b,c){var d=this.getCompProp("events"),e=this.props.logic,f=d&&(d[b.type]||d["dom:"+b.type]);if(f){var h=a.isString(f)?f:f.event;if(h){var i=this.getContextEvent(h),j=h.trim().match(/^set:([^=]+)=(.+)$/);if(j){var k=g.evaluate(t.bind(this,this.contextPath),j[2].trim(),s.call(this,this.contextPath)),l=j[1].trim();u(l)?this.props.viewProps.setVar(this.contextPath,l,k):this.props.viewProps.setDataByPath(this.contextPath,l,k)}else if(a.isFunction(i))i(b,c);else{if(!e)throw"Error:: Missing logic - cannot handle event ["+h+"]";if(!a.isFunction(e[h]))throw"Error:: Logic missing implementation for event ["+h+"]";f.params&&(b.params=x.call(this,f.params,this.contextPath));var m=this.getViewDefProp("data")||"this";b.dataPath=this.props.viewProps.getNormalizedDataPath(this.contextPath,m),e[h](b,c)}}}},createContext:function(b,c,d,e,f){var g=a.merge({},d.view,d.proxy,this.getViewDefProp("vars")),h=this.props.viewProps.getDataByPath(b,c);if(null===b||p(h)){var i=this.props.viewProps.getNormalizedDataPath(b,c);return this.props.viewContextMap.newContextForDataItem(b,i,g,e,f)}return q(h)?this.props.viewContextMap.newContextForDataItem(b,r(h),g,e,f):this.props.viewContextMap.newContextForDataPath(b,c,g,e,f)},componentDidUpdate:function(){this.props.viewProps.siteAPI.reLayoutIfPending()},getInitialState:function(){return l.call(this,this.props),this.proxyData=v.call(this),{}},componentWillUpdate:function(a){this.props.viewContextMap.hasContext(this.contextPath)||l.call(this,a);var b=a.contextProps;b&&b.vars&&b.vars.proxy&&this.props.viewContextMap.overrideContextVars(this.contextPath,b.vars.proxy),this.proxyData=v.call(this,a)},render:function(){try{return this.getCompProp("hidden")?c.DOM.div({ref:"hidden",style:{display:"none"}}):this.renderProxy()}catch(a){if(this.props.viewProps.siteData.isDebugMode())throw a;return console.error("Cannot render proxy "+this.constructor.displayName+" with id: "+this.props.id,a),null}}}}),define("wixappsCore/proxies/mixins/inputProxy",["utils","wixappsCore/proxies/mixins/baseProxy"],function(a,b){"use strict";function c(b){return a.stringUtils.startsWith(b,"$")}return{mixins:[b],setData:function(a,b){var d=this.getViewDefProp("data")||"this";b&&(d+="."+b);var e=c(d)?this.props.viewProps.setVar:this.props.viewProps.setDataByPath;e(this.contextPath,d,a)}}}),define("wixappsCore/core/linksConverter",["lodash","utils"],function(a,b){"use strict";function f(a){return{type:"AnchorLink",anchorName:a.anchorName,anchorDataId:a.anchorDataId,pageId:a.pageId}}function g(a){return{type:"DocumentLink",docId:a.docId,name:a.docName}}function h(a){return{type:"ExternalLink",url:a.protocol?a.protocol+"://"+a.address:a.address,target:a.target}}function i(a){return{type:"PageLink",pageId:"#"+a.pageId}}function j(a){return{type:"EmailLink",recipient:a.email,subject:a.subject}}function k(a){var e=a.href;if("WEBSITE"===a.linkType||d.test(e)){var f={address:e};return h(f)}if(b.stringUtils.startsWith(e,c))return i({pageId:e.substr(1)});if(b.stringUtils.startsWith(e,"mailto:")){var g=e.split("?"),k="";if(g.length>1){var l=b.urlUtils.parseUrlParams(g[1]);k=l.subject||""}var m={subject:k,email:g[0].substr(7)};return j(m)}}function l(a){if(!a)return null;var b=e[a._type];return b&&b(a)}var c="#!",d=/(:\/\/)|(^\/\/)/,e={"wix:Link":k,"wix:PageLink":i,"wix:ExternalLink":h,"wix:MailLink":j,"wix:DocLink":g,"wix:AnchorLink":f};return l}),define("wixappsCore/core/typesConverter",["lodash","utils","wixappsCore/core/linksConverter"],function(a,b,c){"use strict";return{richText:function(b){return{type:"StyledText",text:a.isString(b)?b:b.text}},image:function(a,b,c,d){return{type:"Image",uri:b(a.src,c,d),title:a.title,width:parseInt(a.width,10),height:parseInt(a.height,10)}},videoThumb:function(a,b,c){var d={src:a.imageSrc,title:"",width:480,height:360};return this.image(d,b,c)},table:function(b){return{type:"Table",columnsStyle:a.pluck(b,function(a,b){if(!a.item)throw"missing definition for item in column "+b;return a.item.styleData})}},video:function(a){return{type:"Video",videoId:a.videoId,videoType:a.videoType}},linkableButton:function(b){var c=b&&(b.linkId||b.pageId),d=a.isString(b)?b:b&&b.label;return{type:"LinkableButton",label:a.unescape(d),link:c?"#"+c:""}},selectableList:function(b){return{type:"SelectableList",items:a.map(b.items,function(a){return{type:"SelectOption",value:a.value,text:a.text,enabled:a.enabled!==!1,description:a.description}}),selected:b.selectedValue}},text:function(b){return{type:"Text",text:a.unescape(b)}},icon:function(a,b,c,d){return{type:"Icon",url:b(a.src,c,d),width:a.width,height:a.height,title:a.title}},link:c,imageList:function(b,c,d){return{type:"ImageList",items:a.map(b.items,function(b){return a.merge(this.image(b,c,d),{description:b.description||"",link:this.link(b.link)})}.bind(this))}}}}),define("wixappsCore/util/videoThumbDataHandler",["lodash"],function(a){"use strict";function d(a){return"http://img.youtube.com/vi/"+a+"/0.jpg"}function e(a){return"http://vimeo.com/api/v2/video/"+a+".json"}function f(a){return a.item.imageSrc=d(a.item.videoId),null}function g(a){if(a.item.imageSrc)return null;var b=e(a.item.videoId);return{force:!0,destination:a.path,url:b,dataType:"jsonp",transformFunc:i,error:function(){h(a)}}}function h(a){a.item.imageSrc=c}function i(b,c){var d=b[0],e=a.isArray(c)?j(c,d.id):c;return e.imageSrc=d.thumbnail_large,c}function j(b,c){return a.find(b,function(a){return a.videoId===c+""})}function k(a){return b[a.item.videoType].prepareVideoThumbUrl(a)}function l(b,d){return c||(c=d.santaBase+"/static/images/video/not-found.png"),a.compact(a.map(b,k))}var b={YOUTUBE:{prepareVideoThumbUrl:f},VIMEO:{prepareVideoThumbUrl:g}},c="";return{handleVideoThumbUrls:l}}),define("wixappsCore/proxies/mixins/baseCompositeProxy",["react","lodash","wixappsCore/proxies/mixins/baseProxy","wixappsCore/core/proxyFactory","wixappsCore/core/styleTranslator"],function(a,b,c,d,e){"use strict";function h(a){return b.contains(g,a)}function i(a,b){var c=this.getStyleDef(a,b);c.boxSizing="border-box";var d=this.getCompProp("size",a);if("*"===d)c["box-flex"]=1;else{var g=this.getCompProp("name",a);c[f[g]]=d}return e.translate(c,b.orientation)}function j(b,c){return this.getCompProp("hidden",b)?c={ref:"hidden",style:{display:"none"}}:c.style=i.call(this,b,c),a.DOM.div(c)}var f={HSpacer:"width",VSpacer:"min-height"},g=["HSpacer","VSpacer"];return{mixins:[c],renderChildProxy:function(c,e,f,g){g=g||this.getChildProxyProps(c),e=String(e||"0"),g.key=e,g.ref=e,g.refInParent=e,g.proxyLayout=f,this.getChildrenOrientation&&(g.orientation=this.getChildrenOrientation());var k,i=this.getCompProp("name",c);if(h(i))k=j.call(this,c,g);else{var l=d.getProxyClass(i);if(l.getRequiredParentViewDefProps){var m=l.getRequiredParentViewDefProps();g.parentProps={},b.each(m,function(a){g.parentProps[a]=this.getViewDefProp(a)},this)}k=a.createElement(l,g)}return k}}}),define("wixappsCore/util/localizer",["lodash","utils"],function(a,b){"use strict";function e(b,c){return a.has(c,b)?c[b]:"["+b+"] - not found"}var c="@",d={macroPattern:new RegExp("^"+c+"[0-9a-zA-Z_\\-\\.]*"+c+"$"),thingyPattern:new RegExp(c,"g")};return{getLocalizationBundleForPackage:function(a,c,d){var e=b.wixUserApi.getLanguage(d).toLowerCase(),f=a.getDescriptor(c);return f&&f.lang[e]},localize:function(a,b){for(var c,f,g;null!==(c=d.macroPattern.exec(a));)c=c[0],f=c.replace(d.thingyPattern,""),g=e(f,b),a=a.replace(c,g);return a}}}),define("wixappsCore/util/wixappsUrlParser",["utils","wixappsCore/core/wixappsLogger"],function(a,b){"use strict";var c={"79f391eb-7dfc-4adf-be6e-64434c4838d9":{parse:function(a){var b=a.split("/"),c={};c.filter={},"Featured"===b[0]&&(c.filter.featured=!0,b.shift());for(var d=0;d<b.length;d+=2)switch(b[d]){case"Type":c.filter._type=b[d+1];break;case"Tag":c.filter.tags=decodeURIComponent(b[d+1]);break;case"Page":c.page=b[d+1];break;case"Sort":c.sort=b[d+1];break;case"Date":var e=b[d+1];c.filter["date.iso"]={$regex:"^"+e}}return c}}};return{getAppPageParams:function(a,b){var d=b||a.currentPageInfo,e=a.getDataByQuery(d.pageId);if("AppPage"===e.type&&c[e.appPageId]){var f=d.pageAdditionalData||"";return c[e.appPageId].parse(f)}return null},getPageSubItemId:function(a,b){var c=b||a.currentPageInfo;if(!c.pageAdditionalData)return null;var d=a.getDataByQuery(c.pageId),e=c.pageItemId&&a.getDataByQuery(c.pageItemId);if("AppPage"===d.type||e&&"PermaLink"===e.type){var f=c.pageAdditionalData.match(/(.+?)($|\/.*$)/i);return f[1]}return null},getAppPartZoomAdditionalDataPart:function(a,b){var c=encodeURIComponent(b.toLowerCase().replace(/[\s|\/]+/gi,"-"));return a+"/"+c},getAppPartZoomUrl:function(c,d,e,f){var g=c.getDataByQuery(d);if(!g)return b.reportError(c,b.errors.MISSING_PERMALINK),c.currentUrl.full;var h={title:g.mutableSeoTitle,pageItemId:d,pageAdditionalData:this.getAppPartZoomAdditionalDataPart(e,f)};return a.wixUrlParser.getUrl(c,h)},getAppPageUrl:function(b,c,d,e){var f={pageId:c,title:e,pageAdditionalData:d};return a.wixUrlParser.getUrl(b,f)}}}),define("wixappsCore/util/socialShareHandler",["lodash","utils"],function(a,b){"use strict";function h(a,b){var c=a.split("#"),d=a.indexOf("?")>-1?"&":"?";return c[0]+=d+b,c.join("#")}function i(a,b){var c=a,d=c.split("#!");return d.length>1&&(d[1]=decodeURIComponent(d[1]),c=d.join("#!")),b&&(c=c.replace("#!","/#!")),encodeURIComponent(c)}function j(b){return b?encodeURIComponent(a.unescape(b)):""}function k(a){return a?(a=a.replace(/#/g,encodeURIComponent("#"))," "+a):""}function l(a,c){var d=a||"";return a&&0!==a.indexOf("http")&&(d=b.imageUrl.getImageUrlFullyContained({width:250,height:250},a,{width:250,height:250},c)),d=encodeURIComponent(d)}function m(a){var b=c;return b+=i(a.url)}function n(a,b){var c=d;return c+=i(a.url),c+="&Title="+j(a.title),c+="&ImageURL="+l(a.imageUrl,b)}function o(a,b){var c=e;return c+=i(a.url),c+="&media="+l(a.imageUrl,b),c+="&description="+j(a.title)}function p(a){var b=f;return b+=i(a.url),b+="&text="+j(a.title)+k(a.hashTags)+encodeURIComponent("\n")}function q(a){var b=g;return b+=i(a.url),b+="&t="+j(a.title)}function r(a,b){var c="";switch(a.service){case"google":c=m(a,b);break;case"fancy":c=n(a,b);break;case"pinterest":c=o(a,b);break;case"twitter":c=p(a,b);break;case"facebook":c=q(a,b)}return c}function s(a,b){var c=r(a,b.getSiteData());a.addDeepLinkParam&&(c=h(c,"deeplink_referrer=socialB_"+a.service)),b.openPopup(c,"wixapps_share","width=635,height=346,scrollbars=no,status=no,toolbar=no,menubar=no,location=no")}var c="https://plus.google.com/share?url=",d="http://www.fancy.com/fancyit/fancy?ItemURL=",e="http://pinterest.com/pin/create/button/?url=",f="https://twitter.com/intent/tweet?url=",g="http://www.facebook.com/sharer.php?u=";return{handleShareRequest:s}}),define("wixappsCore/util/typeNameResolver",["lodash"],function(a){"use strict";function b(b){if(a.isUndefined(b))return"undefined";if(a.isNull(b))return"null";if(b._type)return b._type;if(a.isString(b))return"String";if(a.isNumber(b))return"Number";if(a.isBoolean(b))return"Boolean";if(a.isArray(b))return"Array";if(a.isPlainObject(b))return"wix:Object";throw"Error:: Unable to resolve typeName for dataItem [ "+JSON.stringify(b)+" ]"}return{getDataItemTypeName:b}}),define("wixappsCore/proxies/mixins/boxProxy",["react","lodash","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c){"use strict";function f(a,b){return{id:b,comp:{name:a,size:"*"}}}function g(a,b,c,g){b=b||"vertical";var h=a.layout||{};if("*"===h[e[c]]||"*"===h[e.both]){var i=d[b],j=a.id+"_spacer_"+c,k=f(i,j),l="spacer_"+c+"_"+g;return this.renderChildProxy(k,l)}return null}function h(a,b,c){return g.call(this,a,b,"before",c)}function i(a,b,c){return g.call(this,a,b,"after",c)}function j(a){return!("none"===a||"0"===a||0===a||""===a||null===a||b.isUndefined(a))}function k(a){return b.any(a,function(a){var b=this.getStyleDef(a);return"*"===b[e.before]||"*"===b[e.after]||"*"===b[e.both]||j(b["box-flex"])||j(b.flex)||a.comp&&"*"===a.comp.size?!0:void 0},this)}function l(a,b,c){if("rtl"===b&&"horizontal"===c){var d={start:"end",end:"start"};a=d[a]||a}return a}var d={vertical:"VSpacer",horizontal:"HSpacer"},e={both:"spacer",before:"spacerBefore",after:"spacerAfter"};return{mixins:[c],getCustomStyle:function(){var a=this.getCompProp("items"),b=k.call(this,a),c=this.getCompProp("pack"),d=this.getCompProp("box-align"),e=this.getChildrenOrientation(),f="horizontal"===e,g=b||c||d||f,h={position:"relative",display:g?"box":"block","box-orient":e};return d&&(h["box-align"]=d),c&&(h["justify-content"]=l(c,this.getVar("partDirection"),e)),h},renderProxy:function(){var a=this.getCompProp("items"),c=this.getChildrenOrientation(),d=b.map(a,function(a,d){var e=h.call(this,a,c,d),f=this.renderChildProxy(a,d),g=i.call(this,a,c,d);return b.compact([e,f,g])},this);d=b.flatten(d);var e=this.getComponentName&&this.getComponentName(),f=this.getChildCompProps(e,this.transformSkinProperties);"vertical"===c&&(f.className=f.className||"",f.className+=" flex_vbox"),this.getCustomProps&&(f=b.extend(f,this.getCustomProps()));var g=this.getReactClass();return g(f,d)}}}),define("wixappsCore/proxies/mixins/zoomProxy",["lodash","react","wixappsCore/proxies/mixins/boxProxy"],function(a,b,c){"use strict";var d=b.createClass({displayName:"AnchorInPositionAbsoluteWithSiblings",onClick:function(a){return a.target=this.refs.a.getDOMNode(),!0},render:function(){var c=a.omit(this.props,"style","href");return c.onClick=this.onClick,c.style=a.merge({},this.props.style,{cursor:"pointer"}),b.DOM.div(c,b.DOM.a({ref:"a",href:this.props.href,"data-page-item-context":c.pathToItems,target:c.target,style:{position:"absolute",top:0,right:0,left:0,bottom:0}}),c.children)}});return{mixins:[c],getChildrenOrientation:function(){return this.getCompProp("orientation")||"vertical"},getReactClass:function(){return d}}}),define("wixappsCore/proxies/zoomLinkProxy",["react","lodash","wixappsCore/proxies/mixins/zoomProxy","wixappsCore/util/wixappsUrlParser"],function(a,b,c,d){"use strict";return{mixins:[c],getCustomProps:function(){var a=this.props.viewProps.siteAPI.getSiteAspect("wixappsDataAspect"),c=a.getDescriptor(this.props.viewProps.packageName),e=this.props.viewProps.getPartDefinition(),f=b.find(c.parts,{id:e.zoomPartName[0]}),g=this.props.viewProps.getPartData(),h=f.zoomParams.urlIdPrefix+g.appInnerID,i={};return i.href=d.getAppPartZoomUrl(this.props.viewProps.siteData,h,this.proxyData._iid||this.proxyData.id,this.proxyData.title),i.pathToItems=this.props.viewProps.getNormalizedDataPath(this.contextPath,this.getCompProp("listExpression")).join("."),i}}}),define("wixappsCore/proxies/appLinkProxy",["lodash","utils","wixappsCore/proxies/mixins/zoomProxy","wixappsCore/util/wixappsUrlParser"],function(a,b,c,d){"use strict";function e(b){if(!b)return{};var c=a.filter(b.split("/"),function(a,b){return b%2===0}),d=a.filter(b.split("/"),function(a,b){return b%2===1});return a.zipObject(c,d)}function f(b){return a.reduce(b,function(a,b,c){return a+"/"+c+"/"+b},"").substring(1)}function g(a){return a.pageUriSEO||a.title}function i(b,c){return"samePage"===b?this.props.viewProps.siteData.getDataByQuery(this.props.viewProps.siteData.currentPageInfo.pageId):a.find(c,function(a){return a.appPageId&&a.appPageId===b})}var h={appPageLink:function(b,c,e){var f=a.unescape(e.title).replace(/(?![a-z0-9])(?!\s)[\x00-\x7F]/gi,"").replace(/\s+/g,"-");return{href:d.getAppPageUrl(b,c.id,e._iid,f)}},date:function(a,b,c){var e="Date/"+c.value;return{href:d.getAppPageUrl(a,b.id,e,g(b))}},tag:function(a,b,c){var e="Tag/"+(c.key||c);return{href:d.getAppPageUrl(a,b.id,e,g(b))}},prevPage:function(a,b){var c=a.currentPageInfo.pageAdditionalData||"",h=e(c);return h.Page&&Number(h.Page)&&(h.Page=Number(h.Page)-1),0===Number(h.Page)&&delete h.Page,{href:d.getAppPageUrl(a,b.id,f(h),g(b))}},nextPage:function(a,b){var c=a.currentPageInfo.pageAdditionalData||"",h=e(c);return h.Page=h.Page&&Number(h.Page)?Number(h.Page)+1:1,{href:d.getAppPageUrl(a,b.id,f(h),g(b))}}};return{mixins:[c],getCustomProps:function(){var a=this.getCompProp("linkType")||"appPageLink",b=this.props.viewProps.siteData.getPagesDataItems(),c=this.getCompProp("pageId"),d=i.call(this,c,b);return d&&a&&h[a]?h[a](this.props.viewProps.siteData,d,this.proxyData):{}}}}),define("wixappsCore/core/layoutBasedHelper",["lodash"],function(a){"use strict";function b(b,c){var d=a.has(b,"width");return d=d||"vertical"===c,d=d||"horizontal"===c&&(a.has(b,"flex")||a.has(b,"box-flex"))}function c(b,c){var d=a.has(b,"height");return d=d||"horizontal"===c,d=d||"vertical"===c&&(a.has(b,"flex")||a.has(b,"box-flex"))}return{isLayoutBasedWidth:b,isLayoutBasedHeight:c}}),define("wixappsCore/proxies/areaProxy",["lodash","react","core","wixappsCore/proxies/mixins/boxProxy","wixappsCore/core/layoutBasedHelper"],function(a,b,c,d,e){"use strict";var f=c.compFactory,g={display:"inherit","flex-direction":"inherit"};return{mixins:[d],getChildrenOrientation:function(){return this.getCompProp("orientation")||"vertical"},getComponentName:function(){return"wixapps.integration.components.Area"},getReactClass:function(){return f.getCompClass(this.getComponentName())},transformSkinProperties:function(b){var c=this.getStyleDef();return e.isLayoutBasedHeight(c,this.props.orientation)&&(b.bg=b.bg||{},b.bg.style=a.merge({},b.bg.style,{height:"100%"})),b.inlineContent.style=a.merge({},b.inlineContent.style,g,{position:"relative",width:"100%"}),b}}}),define("wixappsCore/proxies/mixins/siteButtonProxy",["lodash","core","wixappsCore/proxies/mixins/baseProxy","wixappsCore/core/typesConverter","wixappsCore/util/localizer"],function(a,b,c,d,e){"use strict";var f=b.compFactory;return{mixins:[c],getCustomStyle:function(){var b={position:"relative"};return this.getAdditionalButtonStyle&&(b=a.merge(b,this.getAdditionalButtonStyle())),b},renderProxy:function(){var b="wysiwyg.viewer.components.SiteButton",c=this.getChildCompProps(b,this.transformSkinProperties),g=d.linkableButton(this.proxyData),h=this.getCompProp("label");a.isUndefined(h)&&(h=g.label),g.label=h.toString()?e.localize(h,this.props.viewProps.getLocalizationBundle()):this.getDefaultLabel(),c.compData=g;var i=this.proxyData;return i&&i.pageId&&(c.getDataByQuery=function(){return d.link(i)}),c.compProp={align:this.getCompProp("align")||"center",margin:this.getCompProp("margin")||0},f.getCompClass(b)(c)}}}),define("wixappsCore/proxies/buttonProxy",["wixappsCore/proxies/mixins/siteButtonProxy","lodash"],function(a,b){"use strict";return{mixins:[a],transformSkinProperties:function(a){var c={"data-proxy-name":"Button",onClick:this.handleViewEvent};return a[""]=b.merge({},a[""],c),a},getAdditionalButtonStyle:function(){var a={},b=this.getCompProp("label")||this.proxyData;return""===b&&(a.display="none"),a},getDefaultLabel:function(){return"Submit"}}}),define("wixappsCore/proxies/button2Proxy",["wixappsCore/proxies/mixins/siteButtonProxy","lodash"],function(a,b){"use strict";return{mixins:[a],transformSkinProperties:function(a){var c=this.getProxyStyle(),d=c.height||this.getCompProp("height")||30,e={onClick:this.handleViewEvent,"data-proxy-name":"Button2",style:{height:d,maxWidth:c.width}};a[""]=b.merge({},a[""],e);var f={overflow:"hidden"};return a.link.style=b.merge({},a.link.style,f),a},getDefaultLabel:function(){return""}}}),define("wixappsCore/util/richTextDefaultStyles",[],function(){"use strict";function a(a){var b="#"===a.charAt(0),c={name:b?"style":"class",value:b?"color:"+a+";":a};return{name:"span",attributes:[c]}}function b(){return{name:"strong"}}function c(){return{name:"em"}}function d(){return{name:"strike"}}function e(){return{name:"u"}}function f(a){return{name:"span",attributes:[{name:"style",value:"font-size:"+a+"px;"}]}}return{color:a,bold:b,italic:c,lineThrough:d,underline:e,fontSize:f}}),define("wixappsCore/proxies/mixins/textProxy",["lodash","utils","wixappsCore/proxies/mixins/baseProxy","wixappsCore/util/richTextDefaultStyles","wixappsCore/core/typesConverter","wixappsCore/util/localizer"],function(a,b,c,d,e,f){"use strict";function h(a){return a.replace(/<a\b[^>]*>(.*?)<\/a>/gi,"$1")}function i(b){var c=a.map(b,function(a){return a.value.indexOf('"')>-1?a.name+"='"+a.value+"'":a.name+'="'+a.value+'"'}).join(" ");return c.length?" "+c:c}function j(b){return a.map(b,function(a){return"<"+a.name+i(a.attributes)+">"}).join("")}function k(b){return a.map(b,function(a){return"</"+a.name+">"}).reverse().join("")}function l(b,c){var e=a.reduce(c,function(a,b){return a[b.name]=b.value,a},{});e["class"]=this.getStyle(this.getCompProp("style")||"Body M"),this.getCompProp("singleLine")&&(e["class"]+=" singleLine");var f=this.getCompProp("line-height");f&&(e.style=e.style||"",/line-height:/.test(e.style)||(e.style="line-height:"+f+"em;"+e.style));var g=[{name:b||"p",attributes:a.reduce(e,function(a,b,c){return a.push({name:c,value:b}),a},[])}];return a.each(["color","bold","italic","lineThrough","underline","fontSize"],function(a){var b=this.getCompProp(a);b&&g.push(d[a](b))},this),g}function m(a){return"wix:RichText"===a._type&&2!==a.version}function n(a){var c=[],d=[];return b.htmlParser(a,{start:function(a,b,e){var f=[{name:e||0!==c.length?a:"hatul",attributes:b}];e||c.push(k(f)),d.push(j(f))},end:function(){d.push(c.pop())},chars:function(a){0===c.length?(d.push("<hatul>"),d.push(a),d.push("</hatul>")):d.push(a)}}),d.join("")}var g={Title:"font_0",Menu:"font_1","Page title":"font_2","Heading XL":"font_3","Heading L":"font_4","Heading M":"font_5","Heading S":"font_6","Body L":"font_7","Body M":"font_8","Body S":"font_9","Body XS":"font_10"},o=new RegExp(a.escape("<br/?>"),"gi");return{mixins:[c],useSkinInsteadOfStyles:!0,getInitialState:function(){return{showToolTip:!1}},componentDidMount:function(){var a=this.getDOMNode(),b=this.getCompProp("singleLine")&&this.getCompProp("showTooltip")&&a.scrollWidth>a.offsetWidth;b!==this.state.showToolTip&&this.setState({showToolTip:b})},createFormattedText:function(b,c){if("wix:RichText"===b._type||"wix:MediaRichText"===b._type)return this.getDataWithDefaultStyle(b.text,c,m(b));"string"!=typeof b&&(b="");var d=b.replace(o,a.unescape),e=a.compact(["<hatul>",this.getCompProp("prefix"),d,this.getCompProp("postfix"),"</hatul>"]).join("");return this.getDataWithDefaultStyle(e,c,!1)},getDataWithDefaultStyle:function(a,c,d){var e=this.getCompProp("disableLinks")?h(a):a,g=d?n(e):e,i=this.getCompProp("singleLine"),m=!1,o=this,p=[],q=[],r=this.props.viewProps.getLocalizationBundle(),s=!1;return b.htmlParser(g,{start:function(a,b,d){if(!m&&(!i||"img"!==a&&"br"!==a)){var e=[{name:a,attributes:b}];"hatul"===a&&(e=l.call(o,c,b)),d||p.push(k(e)),q.push(j(e))}},end:function(){m||(q.push(p.pop()),0===p.length&&i&&(s?m=!0:q=[]))},chars:function(a){if(!(m||0===p.length&&/^\s+$/.test(a))){var b=f.localize(a,r);s=s||!/^(&nbsp;)+$/.test(b),q.push(b)}}}),q.join("")},getLinkDataByQuery:function(b){var c=a.find(this.proxyData.links,function(a){return a.linkId===b});return c?e.link(c):null},getDataByQuery:function(a){return this.getLinkDataByQuery(a)},getRichTextChildCompProps:function(a,b,c){var d=this.getChildCompProps(a,b);return d.getDataByQuery=c||this.getDataByQuery,d.style=d.style||{},d.style["white-space"]=this.getCompProp("noWrap")?"nowrap":"normal",this.state.showToolTip&&(d.title=(this.getCompProp("prefix")||""+this.proxyData+this.getCompProp("postfix")||"").replace(/\s+/gim," ").replace(/^\s*/,"").replace(/\s*$/,"")),d},getStyle:function(a){return g[a]}}}),define("wixappsCore/util/textClipper",["utils"],function(a){"use strict";function c(a,c){var d=[],e=[],f=!1,g=0;return b(a,{start:function(a,b,c,g){f||(d.push(g),c||e.push("</"+a+">"))},chars:function(a){if(!f){var b=a.replace(/&nbsp;/g," ");if(g+b.length>c){f=!0;var h="&nbsp;",i="";for(a.split(h).some(function(a,b){return b>0&&(i+=h,g+=1),a=a.substr(0,c-g),i+=a,g+=a.length,i.length===c-g}),d.push(i.replace(new RegExp("(\\s|"+h+")+$"),"")),d.push("...");e.length>0;)d.push(e.pop())}else g+=b.length,d.push(a)}},end:function(){f||d.push(e.pop())}}),d.join("")}var b=a.htmlParser;return{clipText:c}}),define("wixappsCore/proxies/clippedParagraphProxy",["lodash","core","wixappsCore/proxies/mixins/textProxy","wixappsCore/core/typesConverter","wixappsCore/util/textClipper","fonts"],function(a,b,c,d,e,f){"use strict";function h(b){var c=parseFloat(b);return isNaN(c)&&a.contains(["normal","initial","inherit"],b)&&(c=1.2),c}function i(a){var b=this.getCompProp("minLines")||this.getCompProp("singleLine")&&1;if(!b)return 0;var c=f.fontUtils.getFontClassName(a),d=this.props.viewProps.siteData.getFont(c),e=f.fontUtils.parseFontStr(d),g=1.25;return this.getCompProp("line-height")&&(g=h(this.getCompProp("line-height"))),parseInt(e.size,10)*g*b}var g=b.compFactory;return{mixins:[c],renderProxy:function(){var a=this.proxyData,b=this.createFormattedText(a),c=i.call(this,b),f=function(a){return a[""].style=a[""].style||{},a[""].style.overflow="hidden",c&&(a[""].style["min-height"]=c),a},h="wysiwyg.viewer.components.WRichText",j=this.getRichTextChildCompProps(h,f),k=this.getCompProp("max-chars")||150;return b=e.clipText(b,k),j.compData=d.richText(b),g.getCompClass(h)(j)}}}),define("wixappsCore/proxies/comboBoxProxy",["lodash","core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/inputProxy","wixappsCore/util/localizer"],function(a,b,c,d,e){"use strict";function g(){var b=a.cloneDeep(this.proxyData);return b.items.length&&a.each(b.items,function(a){a.text=e.localize(a.text,this.props.viewProps.getLocalizationBundle())},this),b}var f=b.compFactory;return{mixins:[d],renderProxy:function(){var a=this,b=g.call(this),d="wysiwyg.viewer.components.inputs.ComboBoxInput",e=this.getChildCompProps(d);return e.compData=c.selectableList(b),e.onSelectionChange=function(c,d){c.payload.listData=b;var e=c.payload.value||b.items[0].value;a.setData(e,"selectedValue"),a.handleViewEvent(c,d)},e.errorMessage=!b.valid,f.getCompClass(d)(e)}}}),define("wixappsCore/proxies/cssProxy",["lodash","react","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c){"use strict";return{mixins:[c],renderProxy:function(){var c=this.getCompProp("items"),d=a.map(c,function(a,b){return this.renderChildProxy(a,b)}.bind(this)),e=this.getChildCompProps();return b.DOM.div(e,d)}}}),define("wixappsCore/proxies/dateProxy",["core","wixappsCore/proxies/mixins/textProxy","wixappsCore/core/typesConverter"],function(a,b,c){"use strict";var d=a.compFactory,e=function(){var a=/d{1,5}|m{1,5}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(f,g,h){var i=e;if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(f)||/\d/.test(f)||(g=f,f=void 0),f=f?new Date(f):new Date,isNaN(f))throw"invalid date";g=String(i.masks[g]||g||i.masks["default"]),"UTC:"===g.slice(0,4)&&(g=g.slice(4),h=!0);var j=h?"getUTC":"get",k=f[j+"Date"](),l=f[j+"Day"](),m=f[j+"Month"](),n=f[j+"FullYear"](),o=f[j+"Hours"](),p=f[j+"Minutes"](),q=f[j+"Seconds"](),r=f[j+"Milliseconds"](),s=h?0:f.getTimezoneOffset(),t={d:k,dd:d(k),ddd:i.i18n.dayNames[l],dddd:i.i18n.dayNames[l+7],ddddd:i.i18n.dayNames[l].toUpperCase(),m:m+1,mm:d(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],mmmmm:i.i18n.monthNames[m].toUpperCase(),yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:d(o%12||12),H:o,HH:d(o),M:p,MM:d(p),s:q,ss:d(q),l:d(r,3),L:d(r>99?Math.round(r/10):r),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:h?"UTC":(String(f).match(b)||[""]).pop().replace(c,""),o:(s>0?"-":"+")+d(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][k%10>3?0:(k%100-k%10!==10)*k%10]};return g.replace(a,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}}();return e.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",eUshortDate:"d/m/yy",eUshortDate2:"d.m.yy"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},{mixins:[b],getFormattedDateString:function(a){var b=this.getCompProp("format")||"default",c=a.iso||a,d=new Date(c);return d.getTime()>=0?e(d,b):""},renderProxy:function(){var a=this.proxyData,b=this.createFormattedText(this.getFormattedDateString(a)),e="wysiwyg.viewer.components.WRichText",f=this.getRichTextChildCompProps(e);return f.compData=c.richText(b),d.getCompClass(e)(f)}}}),define("wixappsCore/proxies/erasableTextInputProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/inputProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a=this.proxyData,c="wixapps.integration.components.inputs.ErasableTextInput",e=this.getChildCompProps(c);e.compData=b.text(a),e.compProp={
label:this.getCompProp("label"),placeholder:this.getCompProp("placeholder")},e.message=this.getCompProp("message"),e.isValid=this.getCompProp("isValid");var f=this;return e.onChange=function(a,b){f.setData(a.target.value),a.type="inputChanged",f.handleViewEvent(a,b)},e.onErase=function(){f.setData("")},d.getCompClass(c)(e)}}}),define("wixappsCore/proxies/fixedRatioProxy",["react","wixappsCore/proxies/mixins/baseCompositeProxy","wixappsCore/proxies/mixins/boxProxy","lodash"],function(a,b,c,d){"use strict";function e(a,b){var c=function(b){return a[b]&&!(d.isString(a[b])&&"%"===a[b].slice(-1))},e={};if(c("width"))e.width=parseInt(a.width,10),e.height=Math.floor(e.width/b);else if(c("height"))e.height=parseInt(a.height,10),e.width=Math.floor(e.height*b);else{if(!c("box-flex"))throw new Error("FixedRatioProxy's child proxy does not receive legal layout properties");e.position="absolute",e.height="100%",e.width="100%",e.top="0px",e.left="0px"}return e}function f(b,c){var d={1:"data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",1.77:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAE0lEQVR42mP4TyFgGDVg1AAgAAC2ij3fb7PW1wAAAABJRU5ErkJggg=="},e={position:"relative",top:"0px",bottom:"0px",left:"0px",right:"0px"};if("vertical"===b?e["min-width"]="100%":e["min-height"]="100%",!d[c])throw"This ratio is not supported by the current map: "+c;return a.DOM.img({src:d[c],style:e})}function g(a){var b={vertical:{width:"100%","min-width":"100%",position:"relative"},horizontal:{height:"100%","min-height":"100%",position:"relative"}};return b[a]}return{mixins:[b],renderProxy:function(){var b=this.getCompProp("items"),c=parseFloat(this.getCompProp("aspectRatio"));if(1!==b.length)throw new Error("FixedRatioProxy can only contain one child");if(!c)throw new Error("FixedRatioProxy did not receive any aspect ratio");var h=b[0],i=this.getStyleDef(h);if(h.layout&&!h.layout["box-flex"])return d.merge(i,e(i,c)),this.renderChildProxy(h,0,i);var j=f(this.props.orientation,c),k=g(this.props.orientation);return a.DOM.div({style:d.merge(k,i)},j,this.renderChildProxy(h,0,e(i,c)))}}}),define("wixappsCore/proxies/mixins/templateBasedChildrenProxy",["lodash"],function(a){"use strict";function b(b,c){return c?"first"===b&&a.has(c,"first")?c.first:"last"===b&&a.has(c,"last")?c.last:c.item:{}}function c(a,b){return 0===a&&b>1?"first":a===b-1?"last":"item"}return{getChildTemplateDefinition:function(a,d){var e=this.getCompProp("templates"),f=c(a,d);return b(f,e)}}}),define("wixappsCore/proxies/galleryProxy",["lodash","react","core","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/templateBasedChildrenProxy","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c,d,e,f){"use strict";function h(a){return a[""]["data-proxy-name"]="GalleryProxy",a[""]["data-total-columns"]=this.getCompProp("columns"),a[""]["data-total-rows"]=this.getCompProp("rows"),a[""]["data-gap"]=this.getCompProp("gap"),a.itemsContainer.style.width=isNaN(a.itemsContainer.style.width)?"100%":a.itemsContainer.style.width,a.itemsContainer.style.height=isNaN(a.itemsContainer.style.height)?"100%":a.itemsContainer.style.height,a}function i(b,c){if(!a.isEqual(b.compData,c.compData))return!1;var d=["numCols","maxRows","margin"];return a.isEqual(a.pick(b.compProp,d),a.pick(c.compProp,d))}var g=c.compFactory;return{mixins:[f,e],createGalleryItem:function(b,c,d,e,f,g){var h=this.getCompProp("columns"),i=this.getCompProp("rows"),j=this.getCompProp("gap")||0,k={position:"absolute",width:"calc((100% - "+(h-1)*j+"px) / "+h+")",height:"calc((100% - "+(i-1)*j+"px) / "+i+")"};f&&(k=a.merge(k,f));var l={getComponentScopedClass:function(a){var b={};return b[a]=!0,g(b)}},m=this.getChildTemplateDefinition(c,e),n=this.getViewDefProp("data")||"this",o=a.indexOf(this.proxyData,b),p=this.getItemRef(d,c),q=this.getChildProxyProps(m,[n,o],{functionLibrary:l}),r={className:g({galleryDisplayer:!0}),"data-index":c};return q=a.assign(q,r),this.renderChildProxy(m,p,k,q)},getItemRef:function(a,b){return this.refs.component.props.id+a+"#"+b},registerComponentReLayout:function(){this.refs.component.registerReLayout()},renderProxy:function(){var a="wysiwyg.viewer.components.PaginatedGridGallery",b=this.getChildCompProps(a,h.bind(this));b.createGalleryItem=this.createGalleryItem,b.onAnimationCompleteCallback=this.registerComponentReLayout,b.getItemRef=this.getItemRef,b.compData={items:this.proxyData},b.compProp={transition:this.getCompProp("transition"),autoplayInterval:this.getCompProp("autoplayInterval"),transDuration:this.getCompProp("transDuration")||1,numCols:this.getCompProp("columns"),maxRows:this.getCompProp("rows"),margin:this.getCompProp("gap"),autoplay:this.getCompProp("autoplay"),expandEnabled:this.getCompProp("expandEnabled"),showAutoplay:this.getCompProp("showAutoplay"),showNavigation:this.getCompProp("showNavigation")!==!1,showCounter:this.getCompProp("showCounter")!==!1},b.style.position="relative";var c=this.props.viewProps.siteData.measureMap;return c&&c.height[b.id]&&this.refs.component&&i(b,this.refs.component.props)&&(b.style.width=c.width[b.id],b.style.height=c.height[b.id]),g.getCompClass(a)(b)}}}),define("wixappsCore/proxies/hBoxProxy",["react","wixappsCore/proxies/mixins/boxProxy"],function(a,b){"use strict";return{mixins:[b],getChildrenOrientation:function(){return"horizontal"},getReactClass:function(){return a.DOM.div}}}),define("wixappsCore/proxies/horizontalLineProxy",["core","wixappsCore/proxies/mixins/baseProxy","lodash"],function(a,b,c){"use strict";function e(a){return a[""]=c.merge({},a[""],{style:{position:"relative"}}),a}var d=a.compFactory;return{mixins:[b],renderProxy:function(){var a="wysiwyg.viewer.components.FiveGridLine",b=this.getChildCompProps(a,e);return d.getCompClass(a)(b)}}}),define("wixappsCore/proxies/iconProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a=this.proxyData,c="wixapps.integration.components.Icon",e=this.getChildCompProps(c);return e.compData=b.icon(a,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData,this.props.viewProps.packageName),d.getCompClass(c)(e)}}}),define("wixappsCore/proxies/imageButtonProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a=this.proxyData,c="wixapps.integration.components.ImageButton",e=this.getChildCompProps(c);return e.compData=b.icon(a,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData,this.props.viewProps.packageName),e.compProp={isSprite:this.getCompProp("isSprite"),spriteDirection:this.getCompProp("spriteDirection"),startPositionX:this.getCompProp("startPositionX"),startPositionY:this.getCompProp("startPositionY")},d.getCompClass(c)(e)}}}),define("wixappsCore/proxies/mixins/baseImageProxy",["lodash","core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseProxy","react"],function(a,b,c,d,e){"use strict";function h(b,c){var d=a.pick(c,["width","height"]);return"fitWidth"===b&&a.isNumber(c.width)?d:"fitHeight"===b&&a.isNumber(c.height)?d:a.isNumber(c.height)&&a.isNumber(c.width)?d:{width:16,height:16}}var f=b.compFactory,g={fitWidth:"fitWidthStrict",fitHeight:"fitHeightStrict"};return{mixins:[d],getCustomStyle:function(){return{position:"relative"}},renderProxy:function(){var a="wysiwyg.viewer.components.WPhoto",b=this.getCompProp("imageMode")||"fill",c=this.getCompData(),d=this.getChildCompProps(a);d.compData=c;var i=g[b]||b;d.compProp={displayMode:i},this.getCompProp("showZoom")&&(d.compProp.onClickBehavior="zoomAndPanMode");var j={"data-proxy-name":"Image","data-width":c.width,"data-height":c.height,"data-uri":c.uri,"data-display-mode":i,id:d.id+"_container",style:d.style,ref:"container"};return d.style=h(i,d.style),e.DOM.div(j,f.getCompClass(a)(d))}}}),define("wixappsCore/proxies/imageProxy",["wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseImageProxy"],function(a,b){"use strict";return{mixins:[b],getCompData:function(){return a.image(this.proxyData,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData,this.props.viewProps.packageName)}}}),define("wixappsCore/proxies/inlineSpacerProxy",["react","wixappsCore/proxies/mixins/baseProxy"],function(a,b){"use strict";return{mixins:[b],getCustomStyle:function(){var a=this.getCompProp("size");return{wordSpacing:a,display:"inline"}},renderProxy:function(){var b=this.getChildCompProps();return a.DOM.div(b," ")}}}),define("wixappsCore/proxies/inlineTextProxy",["core","wixappsCore/proxies/mixins/textProxy","wixappsCore/core/typesConverter","react"],function(a,b,c,d){"use strict";function f(a){return a[""].parentConst=d.DOM.span,a}var e=a.compFactory;return{mixins:[b],renderProxy:function(){var a=this.proxyData,b=this.createFormattedText(a,"span"),d="wysiwyg.viewer.components.WRichText",g=this.getRichTextChildCompProps(d,f);return g.compData=c.richText(b),e.getCompClass(d)(g)}}}),define("wixappsCore/proxies/labelProxy",["core","wixappsCore/proxies/mixins/textProxy","wixappsCore/core/typesConverter"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[b],renderProxy:function(){var a=this.proxyData,b=this.createFormattedText(a),e="wysiwyg.viewer.components.WRichText",f=this.getRichTextChildCompProps(e);return f.compData=c.richText(b),d.getCompClass(e)(f)}}}),define("wixappsCore/proxies/linkProxy",["react","utils","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/boxProxy"],function(a,b,c,d){"use strict";return{mixins:[d],getChildrenOrientation:function(){return this.getCompProp("orientation")||"vertical"},getReactClass:function(){return a.DOM.a},getCustomProps:function(){var a=c.link(this.proxyData),d=b.linkRenderer.renderLink(a,this.props.viewProps.siteData);return d.className="wixAppsLink",d}}}),define("wixappsCore/proxies/listProxy",["react","lodash","core","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/templateBasedChildrenProxy","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c,d,e,f){"use strict";var g=c.compFactory;return{mixins:[f,e],getDefaultProps:function(){return{}},getInitialState:function(){return{currentPage:1}},prevPageClicked:function(){var a=this.proxyData.length,b=this.getCompProp("itemsPerPage"),c=Math.ceil(a/b),d={currentPage:this.state.currentPage};d.currentPage=1===this.state.currentPage?c:d.currentPage-1,this.setState(d),this.props.viewProps.siteAPI.registerReLayoutPending()},nextPageClicked:function(){var a=this.proxyData.length,b=this.getCompProp("itemsPerPage"),c=Math.ceil(a/b),d={currentPage:this.state.currentPage};d.currentPage=this.state.currentPage===c?1:d.currentPage+1,this.setState(d),this.props.viewProps.siteAPI.registerReLayoutPending()},renderProxy:function(){var e,a=this.proxyData,c=a.length,d=this.getCompProp("templates")?this.getCompProp("templates.vars"):{},f=this.getCompProp("hidePagination");f||(e=this.getCompProp("itemsPerPage"));var h=0,i=c,j=1,k=this.state.currentPage;b.isUndefined(e)||(h=(k-1)*e,i=Math.min(h+e,c),j=Math.ceil(c/e));var l=a.slice(h,i),m=l.length,n=b.map(l,function(a,c){var e="middle";0===c&&m>1?e="first":c===m-1&&(e="last");var f={indexInParent:c,indexOneInParent:c+1,positionInParent:e,isOddIndexInParent:c%2===1,currentPage:k,maxPage:j,hasNext:k!==j,hasPrev:1!==k,hidePagination:this.getCompProp("hidePagination")};f=b.merge({},d,f);var g={prevPageClicked:this.prevPageClicked,nextPageClicked:this.nextPageClicked},i=this.getViewDefProp("data")||"this",l=this.getChildTemplateDefinition(c,m),n={vars:{proxy:f},events:g},o=h+c,p=this.getChildProxyProps(l,[i,o],n);return p["data-isfirst"]=0===c,p["data-iseven"]=c%2===1,p["data-islast"]=c===m-1,p.proxyParentId=this.props.viewDef.id+"_"+o,this.renderChildProxy(l,o,this.props.childAdditionalStyle,p)},this),o=this.getChildCompProps("wysiwyg.viewer.components.VerticalRepeater");return o.style=b.merge(o.style,this.props.additionalStyle),g.getCompClass("wysiwyg.viewer.components.VerticalRepeater")(o,n)}}}),define("wixappsCore/proxies/mediaLabelProxy",["lodash","core","wixappsCore/proxies/mixins/textProxy","wixappsCore/core/typesConverter"],function(a,b,c,d){"use strict";function f(b){return b[""]=a.merge({},b[""],{"data-proxy-name":"MediaLabel"}),b}function g(a){var b=a.viewDef.data||"this";return this.props.viewProps.getNormalizedDataPath(this.contextPath,b)}var e=b.compFactory;return{mixins:[c],shouldComponentUpdate:function(b){var c=a.contains(this.props.viewProps.siteData.componentsToRender,this.props.viewProps.compId),d=g.call(this,b),e=!a.isEqual(this.fullDataPath,d);return c||e},getMediaDataByQuery:function(a){var b=this.proxyData.refMap[a];if(b){if("wix:Image"===b._type)return d.image(b,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData,this.props.viewProps.packageName);if("wix:Video"===b._type)return d.video(b)}return null},getDataOrMediaByQuery:function(a){return this.getDataByQuery(a)||this.getMediaDataByQuery(a)},renderProxy:function(){var a=this.proxyData;this.fullDataPath=g.call(this,this.props);var b=this.createFormattedText(a),c="wysiwyg.viewer.components.MediaRichText",h=this.getRichTextChildCompProps(c,f,this.getDataOrMediaByQuery);return h.compData=d.richText(b),e.getCompClass(c)(h)}}}),define("wixappsCore/proxies/paginatedColumnGalleryProxy",["lodash","core","react","utils","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/templateBasedChildrenProxy","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c,d,e,f,g){"use strict";var h=b.componentUtils.galleryPagingCalculations;return{mixins:[g,f],componentWillUpdate:function(a){var b=Math.ceil(this.proxyData.length/this.getItemsNumberPerPage(a)),c=this.getVar("maxPage");b!==c&&this.setVar("maxPage",b,!0)},componentWillMount:function(){var a=Math.ceil(this.proxyData.length/this.getItemsNumberPerPage(this.props));this.setVar("maxPage",a,!0)},getItemsNumberPerPage:function(b){var c=parseInt(this.getCompProp("itemsPerPage",b.viewDef),10);return(a.isNaN(c)||!a.isNaN(c)&&c>=this.proxyData.length)&&(c=this.proxyData.length),c},createChildProxy:function(b,e,f){var g=this.getViewDefProp("data")||"this",h=this.getChildTemplateDefinition(b,e),i=this.getChildProxyProps(h,[g,b],{});return c.DOM.div({key:b,style:a.assign({display:"inline-block",verticalAlign:"top",width:100/f+"%"},d.style.prefix({boxSizing:"border-box"}))},this.renderChildProxy(h,b,null,i))},getCurrentPositionInData:function(a,b){return a===this.proxyData.length?0:b*a},getCurrentPage:function(){var a=this.getVar("currentPage")||1;return a=parseInt(a,10)-1},renderProxy:function(){for(var a=this.getItemsNumberPerPage(this.props),b=this.getCurrentPage(),d=this.getCurrentPositionInData(a,b),e=this.getCompProp("columns")||3,f=[],g=h.getLastItemIndex(this.proxyData,d,a),i=d;g>=i;i++)f.push(this.createChildProxy(i,a,e));var j=this.getChildCompProps();return j["data-proxy-name"]="PaginatedColumnGalleryProxy",j["data-direction"]=this.getVar("partDirection")||"ltr",j["data-horizontal-gap"]=this.getCompProp("horizontalGap")||0,j["data-vertical-gap"]=this.getCompProp("verticalGap")||0,j["data-columns"]=e,c.DOM.div(j,f)}}}),define("wixappsCore/proxies/sliderGalleryProxy",["lodash","react","core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseProxy"],function(a,b,c,d,e){"use strict";function g(){return{showAutoplay:this.getCompProp("showAutoplay")||!1,loop:this.getCompProp("loop")||!1,showCounter:this.getCompProp("showCounter")||!1,expandEnabled:this.getCompProp("expandEnabled")||!1,galleryImageOnClickAction:this.getCompProp("galleryImageOnClickAction"),imageMode:this.getCompProp("imageMode"),maxSpeed:this.getCompProp("maxSpeed")||5,margin:this.getCompProp("margin"),aspectRatio:1.333}}function h(){var b=a.map(this.proxyData,function(b){var c=a.clone(b);return c.src=this.props.viewProps.resolveResourcePath(b.src,this.props.viewProps.siteData,this.props.viewProps.packageName),c},this);return{items:b}}var f=c.compFactory;return{mixins:[e],useSkinInsteadOfStyles:!0,renderProxy:function(){var c="wysiwyg.viewer.components.SliderGallery",e=h.call(this),i=g.call(this),j=a.merge(this.getChildCompProps(c),{compData:d.imageList(e,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData),compProp:i,onImageSelected:this.handleViewEvent,structure:this.props.structure}),k={"data-proxy-name":"SliderGallery","data-aspect-ratio":i.aspectRatio,"data-image-mode":i.imageMode,id:j.id+"_container",style:j.style,ref:"container"};return b.DOM.div(k,f.getCompClass(c)(j))}}}),define("wixappsCore/proxies/stackProxy",["lodash","react","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c){"use strict";return{mixins:[c],getCustomStyle:function(){return{position:"relative"}},renderProxy:function(){var c=this.getCompProp("items"),d=a.map(c,function(a,b){var c=this.getCompProp("layout",a),d=0===b&&"layout"!==this.getCompProp("stackType")?"static":"absolute",e={position:d,top:c.top||"0px",left:c.left||"0px"};return this.renderChildProxy(a,b,e)},this),e=this.getChildCompProps();return e["data-proxy-name"]="Stack",b.DOM.div(e,d)}}}),define("wixappsCore/proxies/switchBoxProxy",["lodash","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c){"use strict";return{mixins:[c],renderProxy:function(){var b=this.getCompProp("cases"),c=a.has(b,this.proxyData)?this.proxyData:"default",d=b[c];if(0===d.length)return null;var e=this.getCompProp("orientation")||"vertical",f=a.cloneDeep(a.omit(this.props.viewDef,["comp.cases"]));return delete f.data,delete f.name,delete f.forType,delete f.comp.cases,f.id=f.id+"_"+c,f.comp.name="vertical"===e?"VBox":"HBox",f.comp.items=d,this.renderChildProxy(f,f.id,this.getProxyStyle())}}}),define("wixappsCore/proxies/textAreaProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/inputProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a="wixapps.integration.components.inputs.TextArea",c=this.getChildCompProps(a),e=this.proxyData,f=void 0!==e.valid?e.valid:!0;return c.compData=b.text(this.state.text),c.compProp={placeholder:this.getCompProp("placeholder"),label:this.getCompProp("label"),message:this.getCompProp("message")||!f,maxLength:this.getCompProp("maxLength"),isPreset:this.getCompProp("isPreset"),onChange:this.updateText,onBlur:this.onBlur},d.getCompClass(a)(c)},getInitialState:function(){var a=this.proxyData,b=void 0!==a.text?a.text:a;return{text:b}},updateText:function(a){var b=a.target.value;this.setState({text:b})},onBlur:function(a,b){var c=a.target.value;a.type="inputChanged",a.payload={value:c};var d=void 0!==this.proxyData.text?"text":"this";this.setData(c,d),this.handleViewEvent(a,b)}}}),define("wixappsCore/proxies/textInputProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/inputProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a=this.proxyData,c="wixapps.integration.components.inputs.TextInput",e=this.getChildCompProps(c);e.compData=b.text(a),e.compProp={label:this.getCompProp("label"),placeholder:this.getCompProp("placeholder")},e.message=this.getCompProp("message"),e.isValid=this.getCompProp("isValid");var f=this;return e.onChange=function(a,b){f.setData(a.target.value),a.type="inputChanged",f.handleViewEvent(a,b)},d.getCompClass(c)(e)}}}),define("wixappsCore/proxies/toggleProxy",["react","core","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/baseCompositeProxy"],function(a,b,c,d){"use strict";function f(){var a=this.getCompProp("templates"),b=this.renderChildProxy(a.on,"on"),c=this.renderChildProxy(a.off,"off");return[b,c]}var e=b.compFactory;return{mixins:[d],renderProxy:function(){var a=f.call(this),b="wixapps.integration.components.Toggle",c=this.getChildCompProps(b);return c.initialState=this.getCompProp("initialState")||"off",e.getCompClass(b)(c,a)}}}),define("wixappsCore/proxies/vBoxProxy",["react","wixappsCore/proxies/mixins/boxProxy"],function(a,b){"use strict";return{mixins:[b],getChildrenOrientation:function(){return"vertical"},getReactClass:function(){return a.DOM.div}}}),define("wixappsCore/proxies/flowListProxy",["wixappsCore/proxies/listProxy"],function(a){"use strict";return{mixins:[a],getDefaultProps:function(){return{additionalStyle:{display:"block",whiteSpace:"normal"},childAdditionalStyle:{display:"inline-block",width:"auto"}}}}}),define("wixappsCore/proxies/videoProxy",["core","wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseProxy"],function(a,b,c){"use strict";var d=a.compFactory;return{mixins:[c],renderProxy:function(){var a="wysiwyg.viewer.components.Video",c=this.proxyData,e=this.getChildCompProps(a);return e.compData=b.video(c),e.compProp={showControls:this.getCompProp("showControls"),autoplay:this.getCompProp("autoplay"),loop:this.getCompProp("loop"),showinfo:this.getCompProp("showinfo"),lightTheme:this.getCompProp("lightTheme")},d.getCompClass(a)(e)}}}),define("wixappsCore/proxies/videoThumbProxy",["wixappsCore/core/typesConverter","wixappsCore/proxies/mixins/baseImageProxy"],function(a,b){"use strict";return{mixins:[b],getProxyCustomCssClass:function(){return this.props.viewProps.classSet({videoIndicator:!0})},getCompData:function(){return a.videoThumb(this.proxyData,this.props.viewProps.resolveResourcePath,this.props.viewProps.siteData)}}}),define("wixappsCore/core/stylesheetRenderer",["lodash"],function(a){"use strict";function b(a){return/^#/.test(a)?a:"#"+a}function c(b){var c=a.map(b,function(a,b){return b+":"+a});return"{"+c.join(";")+"}"}function d(b,d,e){var f=b+" "+d+" ",g=[];return a.forOwn(e,function(b,d){a.each(d.split(/\s*,\s*/),function(a){var d=f+a+c(b);g.push(d)})}),g}function e(c,e,f){if(e=b(e),f=b(f),a.isEmpty(c))return null;if(!a.isArray(c))throw"stylesheetRenderer:: stylesheet definition must be an array";return a.flatten(a.map(c,d.bind(null,e,f))).join("")}return{render:e}}),define("wixappsCore/util/wrappedProxyStyles",["lodash"],function(a){"use strict";function c(c){return a.some(b,function(b){return a.contains(c,b)})}var b=["padding","margin","border","top","left","right","bottom","visibility"];return{getWrapperCssClass:function(b){var c=a.any(b,function(b,c){return a.contains(c,"flex")});return c?"flex_display":""},getProxyStyles:function(b){return a.mapValues(b,function(a,b){return c(b)?null:a})}}}),define("wixappsCore/proxies/viewProxy",["lodash","react","wixappsCore/util/viewsUtils","wixappsCore/core/proxyFactory","wixappsCore/proxies/mixins/baseProxy","wixappsCore/proxies/mixins/baseCompositeProxy","wixappsCore/core/stylesheetRenderer","wixappsCore/util/typeNameResolver","wixappsCore/core/wixappsPlugins","wixappsCore/util/wrappedProxyStyles"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,d){var e=this.getChildProxyProps(a);return e.viewDef=a,e.viewName=b,e.forType=d,e.viewId=c.sanitizeCompId(b+"_"+d+"_"+this.props.formatName),e.viewContainerId=c.sanitizeCompId(e.viewId+"_"+this.contextPath),e.parentContextPath=this.innerContextPath,e}function l(a,c,d){var e=g.render(a,c,d);return b.DOM.style({type:"text/css",key:c+"."+d,dangerouslySetInnerHTML:{__html:e}})}function n(b,c,d){var e=this.getChildCompProps();return e.id=b.viewContainerId,e.ref="viewWrapper",e.style=a.merge({},c,d),e.className+=" "+j.getWrapperCssClass(e.style),e}var m=b.createClass({displayName:"WixappsStyleSheet",mixins:[e],renderProxy:function(){return l(this.getViewDefProp("stylesheet"),this.props.viewProps.compId,this.props.viewContainerId)}});return{mixins:[f],renderProxy:function(){var c=this.getCompProp("name")||this.props.viewName,d=this.proxyData,e=h.getDataItemTypeName(d),f=this.props.viewProps.getViewDef(c,e,this.props.formatName);if(!f)throw"ViewProxy:: Cannot find view definition for viewName ["+c+"] typeName ["+e+"] format ["+this.props.formatName+"]";var g=this.getViewDefProp("data")||"this",i=a.merge({},this.getCompProp("vars"),this.getViewDefProp("vars",f));this.innerContextPath&&this.props.viewContextMap.hasContext(this.innerContextPath)||(this.innerContextPath=this.createContext(this.contextPath,[g],{view:i},{},{}));var l=k.call(this,f,c,e),o=this.getProxyStyle(),p=this.getStyleDef(f,this.innerContextPath),q=n.call(this,l,p,o),r=j.getProxyStyles(q.style);a.has(q.style,"height")&&(r.height=r.width="100%");var s=this.renderChildProxy(f,"child",r,l),t=k.call(this,f,c,e);t.key="stylesheet";var u=m(t);return b.DOM.div(q,u,s)}}}),define("wixappsCore/proxies/verticalLineProxy",["core","wixappsCore/proxies/mixins/baseProxy"],function(a,b){"use strict";var c=a.compFactory;return{mixins:[b],renderProxy:function(){var a="wysiwyg.viewer.components.VerticalLine",b=this.getChildCompProps(a);return c.getCompClass(a)(b)}}}),define("wixappsCore/proxies/proxyMap",["wixappsCore/core/proxyFactory","wixappsCore/proxies/zoomLinkProxy","wixappsCore/proxies/appLinkProxy","wixappsCore/proxies/areaProxy","wixappsCore/proxies/buttonProxy","wixappsCore/proxies/button2Proxy","wixappsCore/proxies/clippedParagraphProxy","wixappsCore/proxies/comboBoxProxy","wixappsCore/proxies/cssProxy","wixappsCore/proxies/dateProxy","wixappsCore/proxies/erasableTextInputProxy","wixappsCore/proxies/fixedRatioProxy","wixappsCore/proxies/galleryProxy","wixappsCore/proxies/hBoxProxy","wixappsCore/proxies/horizontalLineProxy","wixappsCore/proxies/iconProxy","wixappsCore/proxies/imageButtonProxy","wixappsCore/proxies/imageProxy","wixappsCore/proxies/inlineSpacerProxy","wixappsCore/proxies/inlineTextProxy","wixappsCore/proxies/labelProxy","wixappsCore/proxies/linkProxy","wixappsCore/proxies/listProxy","wixappsCore/proxies/mediaLabelProxy","wixappsCore/proxies/paginatedColumnGalleryProxy","wixappsCore/proxies/sliderGalleryProxy","wixappsCore/proxies/stackProxy","wixappsCore/proxies/switchBoxProxy","wixappsCore/proxies/textAreaProxy","wixappsCore/proxies/textInputProxy","wixappsCore/proxies/toggleProxy","wixappsCore/proxies/vBoxProxy","wixappsCore/proxies/flowListProxy","wixappsCore/proxies/videoProxy","wixappsCore/proxies/videoThumbProxy","wixappsCore/proxies/viewProxy","wixappsCore/proxies/verticalLineProxy"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){"use strict";a.register("ZoomLink",b),a.register("AppLink",c),a.register("Area",d),a.register("Container",d),a.register("Button2",f),a.register("Button",e),a.register("ClippedParagraph",g),a.register("ClippedParagraph2",g),a.register("ComboBox",h),a.register("Css",i),a.register("Date",j),a.register("ErasableTextInput",k),a.register("FixedRatioLayout",l),a.register("Gallery",m),a.register("HBox",n),a.register("HorizontalLine",o),a.register("Icon",p),a.register("ImageButton",q),a.register("Image",r),a.register("InlineSpacer",s),a.register("InlineText",t),a.register("Label",u),a.register("Link",v),a.register("MediaLabel",x),a.register("ColumnGallery",y),a.register("PaginatedColumnGallery",y),a.register("SliderGallery",z),a.register("Stack",A),a.register("SwitchBox",B),a.register("TextArea",C),a.register("TextInput",D),a.register("Toggle",E),a.register("VBox",F),a.register("VerticalList",w),a.register("List2",w),a.register("PaginatedList",w),a.register("FlowList",G),a.register("Video",H),a.register("VideoThumb",I),a.register("View",J),a.register("VerticalLine",K)}),define("wixappsCore/core/wixappsDataAspect",["lodash","core","wixappsCore/core/wixappsDataHandler"],function(a,b,c){"use strict";function e(a){this.aspectSiteApi=a}var d=b.siteAspectsRegistry;e.prototype={getDescriptor:function(a){return c.getDescriptor(this.aspectSiteApi.getSiteData(),a)},getDataByCompId:function(a,b){return c.getDataByCompId(this.aspectSiteApi.getSiteData(),a,b)},getExtraDataByCompId:function(a,b){return c.getExtraDataByCompId(this.aspectSiteApi.getSiteData(),a,b)},getDataByPath:function(a,b){return c.getDataByPath(this.aspectSiteApi.getSiteData(),a,b)},setDataByPath:function(a,b,d){c.setDataByPath(this.aspectSiteApi.getSiteData(),a,b,d),this.aspectSiteApi.forceUpdate()},setBatchedData:function(b,d,e){if(0!==d.length){var f=this.aspectSiteApi.getSiteData();a.forEach(d,function(a){c.setDataByPath(f,b,a.path,a.value)}),e||this.aspectSiteApi.forceUpdate()}},getMetadata:function(a,b){return b?c.getCompMetadata(this.aspectSiteApi.getSiteData(),a,b):c.getPackageMetadata(this.aspectSiteApi.getSiteData(),a)},setMetadata:function(a,b,d){c.setPackageMetadata(a,this.aspectSiteApi.getSiteData(),b,d),this.aspectSiteApi.forceUpdate()}},d.registerSiteAspect("wixappsDataAspect",e)}),define("wixappsCore",["wixappsCore/core/viewsRenderer","wixappsCore/core/viewsCustomizer","wixappsCore/core/proxyFactory","wixappsCore/core/logicFactory","wixappsCore/core/styleCollector","wixappsCore/core/styleData","wixappsCore/core/ViewContextMap","wixappsCore/core/wixappsDataHandler","wixappsCore/core/wixappsLogger","wixappsCore/proxies/mixins/baseProxy","wixappsCore/proxies/mixins/inputProxy","wixappsCore/core/typesConverter","wixappsCore/util/videoThumbDataHandler","wixappsCore/proxies/mixins/baseCompositeProxy","wixappsCore/util/spacersCalculator","wixappsCore/core/wixappsConfiguration","wixappsCore/util/localizer","wixappsCore/core/expressions/functionLibrary","wixappsCore/util/viewsUtils","wixappsCore/util/wixappsUrlParser","wixappsCore/util/socialShareHandler","wixappsCore/util/typeNameResolver","wixappsCore/proxies/proxyMap","wixappsCore/core/wixappsDataAspect"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";return{viewsRenderer:a,viewsCustomizer:b,proxyFactory:c,baseProxy:j,inputProxy:k,baseCompositeProxy:n,typesConverter:l,logicFactory:d,ViewContextMap:g,wixappsDataHandler:h,wixappsLogger:i,videoThumbDataHandler:m,styleCollector:e,spacersCalculator:o,wixappsConfiguration:p,localizer:q,FunctionLibrary:r,viewsUtils:s,wixappsUrlParser:t,socialShareHandler:u,typeNameResolver:v}});